(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"7a81":function(t,e,i){},"87cb":function(t,e,i){},ab4d:function(t,e,i){"use strict";i("87cb")},c2e3:function(t,e,i){},dd56:function(t,e,i){},f7ec:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex flex-center",staticStyle:{overflow:"hidden"}},[i("editor",{ref:"editor",attrs:{title:t.title,text:t.text},on:{textChanged:t.handleInput}})],1)},r=[],o=(i("4fad"),i("07ac"),i("b64b"),i("7db0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("q-dialog",{model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center q-pb-none"},[i("div",{staticClass:"text-h6"},[t._v("Info")]),i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-card-section",[i("p",[t._v("\n          ***The different formatting options won't be appearing\n          accordingly(all will be the same). However, it will be rendered\n          appropriately at the reader's side when published.\n        ")]),i("p",[t._v("\n          - All progress are automatically saved and sync with our cloud\n          storage. So, it is perfectly fine to not click save button.\n        ")]),i("p",[t._v("\n          - Paragraph formattings will have an automatic first-line indent at\n          the readers. So, you are not required to indent manually.\n        ")]),i("p",[t._v("\n          - Please do try out our zen mode ðŸ˜‰\n        ")])])],1)],1),i("div",{staticClass:"row q-ma-sm"},[i("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:"Zen Mode",icon:"self_improvement"},on:{click:t.enableZen}})],1),i("div",{staticClass:"row text-h6 q-ma-lg items-center"},[i("h2",{staticClass:"q-ma-md"},[t._v(t._s(t.$props.title))])]),i("notebook-ui",{ref:"notebook",staticClass:"window-width",attrs:{customStyle:{color:"orange","text-decoration":"bold"},content:t.new_text,placeholder:"Let's write your story!!!",type:"Texture",color:"red"},on:{input:t.textChanged,save:t.textSaved}}),i("q-scroll-area",{class:{hidden:!t.isFullScreen},staticStyle:{height:"200px","max-width":"300px"},attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle,visible:!1,id:"notebook"}},[i("notebook-ui",{ref:"notebook",staticClass:"window-width",staticStyle:{"min-height":"100vh","border-radius":"0"},attrs:{customStyle:{color:"orange"},content:t.new_text,placeholder:"Let's write your story!!!",type:"Texture",color:"black"},on:{input:t.textChanged,save:t.textSaved}})],1)],1)}),a=[],s=(i("ac1f"),i("5319"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"note-area",class:["note-area--"+t.type,"note-area-margin--"+t.type]},[i("q-editor",{ref:"editor_ref",staticClass:"note-area-content",class:["note-area-content--"+t.type],style:t.customStyle?t.customStyle:{color:t.color,"font-family":t.fontStyle},attrs:{placeholder:t.placeholder,value:t.content,minHeight:"480",flat:"","paragraph-tag":"p",spellcheck:"false",definitions:{save:{tip:"Save your work",icon:"save",label:"Save",handler:t.saveText},strike:{key:9}},toolbar:[["bold","italic","strike","underline","link"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["h1","h2","h3","h4","h5","h6","p","code"]}],[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,options:["left","center","right","justify"]}],["undo","redo"],["save"]]},on:{input:t.inputChanged,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.ctrlKey?(e.preventDefault(),e.stopPropagation(),t.saveText(e)):null}},nativeOn:{paste:function(e){return function(e){return t.pasteCapture(e)}(e)}}})],1)}),c=[],l=(i("7a81"),i("dd56"),i("c2e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],style:t.computedStyles,domProps:{value:t.val},on:{focus:t.resize,input:function(e){e.target.composing||(t.val=e.target.value)}}})}),u=[],h=(i("a9e3"),i("caad"),i("2532"),i("99af"),{name:"TextareaAutogrow",props:{value:{type:[String,Number],default:""},autosize:{type:Boolean,default:!0},minHeight:{type:[Number],default:null},maxHeight:{type:[Number],default:null},important:{type:[Boolean,Array],default:!1}},data:function(){return{val:null,maxHeightScroll:!1,height:"auto"}},computed:{computedStyles:function(){return this.autosize?{resize:this.isResizeImportant?"none !important":"none",height:this.height,overflow:this.maxHeightScroll?"auto":this.isOverflowImportant?"hidden !important":"hidden"}:{}},isResizeImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("resize")},isOverflowImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("overflow")},isHeightImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("height")}},watch:{value:function(t){this.val=t},val:function(t){this.$nextTick(this.resize),this.$emit("input",t)},minHeight:function(){this.$nextTick(this.resize)},maxHeight:function(){this.$nextTick(this.resize)},autosize:function(t){t&&this.resize()}},methods:{resize:function(){var t=this,e=this.isHeightImportant?"important":"";return this.height="auto".concat(e?" !important":""),this.$nextTick((function(){var i=t.$el.scrollHeight+1;t.minHeight&&(i=i<t.minHeight?t.minHeight:i),t.maxHeight&&(i>t.maxHeight?(i=t.maxHeight,t.maxHeightScroll=!0):t.maxHeightScroll=!1);var n=i+"px";t.height="".concat(n).concat(e?" !important":"")})),this}},created:function(){this.val=this.value},mounted:function(){this.resize()}}),p=h,d=i("2877"),f=Object(d["a"])(p,l,u,!1,null,null,null),m=(f.exports,{name:"notebook-ui",props:{type:{type:String,default:"EmptyLined",validator:function(t){return-1!==["EmptyLined","EmptyLinedColored","Texture"].indexOf(t)}},color:{type:String,default:"mediumblue"},fontStyle:{type:String,default:'"Handlee", cursive'},placeholder:{default:"Write note here"},content:{default:""},customStyle:{type:Object}},methods:{inputChanged:function(t){this.$emit("input",t)},saveText:function(t){this.$emit("save",this.$props.content),console.log(this.$props.content),console.log(this.$q.lang.editor),this.$q.notify({message:"Your work has been saved.",icon:"save",color:"positive"})},pasteCapture:function(t){var e,i;"INPUT"!==t.target.nodeName&&(t.preventDefault(),t.originalEvent&&t.originalEvent.clipboardData.getData?(e=t.originalEvent.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):t.clipboardData&&t.clipboardData.getData?(e=t.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):window.clipboardData&&window.clipboardData.getData&&(i||(i=!0,this.$refs.editor_ref.runCmd("ms-pasteTextOnly",e)),i=!1))}}}),g=m,y=i("d66b"),v=i("eebe"),x=i.n(v),b=Object(d["a"])(g,s,c,!1,null,null,null),w=b.exports;x()(b,"components",{QEditor:y["a"]});var $={components:{NotebookUi:w},name:"Editor",props:{title:{type:String,required:!0},text:{type:String,required:!0}},watch:{"$q.fullscreen.isActive":function(t){this.isFullScreen=t},"$props.text":function(t){this.new_text=t}},beforeDestroy:function(){this.checkTextSync()},data:function(){return{info:!0,new_title:this.$props.title,new_text:this.$props.text,isFullScreen:!1,isEditing:!0,typingTimer:null,doneTypingInterval:3e3,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"orange",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"orange",width:"9px",opacity:.2}}},methods:{enableZen:function(){var t=document.getElementById("notebook");this.$q.fullscreen.toggle(t).then((function(){})).catch((function(t){alert(t)}))},textChanged:function(t){this.new_text=t,clearTimeout(this.typingTimer),t&&(this.typingTimer=setTimeout(this.$emit("textChanged",t),this.doneTypingInterval))},textSaved:function(t){this.new_text=t,this.$emit("textChanged",t)},titleChanged:function(t){this.$refs.titleInput.validate(),this.$refs.titleInput.hasError||(t=t.replace(/(\r\n|\n|\r)/gm,""),this.new_title=t,this.$emit("titleChanged",t))},checkTextSync:function(){console.log("sync checked"),this.$emit("textChanged",this.new_text)}}},S=$,k=(i("ab4d"),i("9989")),_=i("24e8"),C=i("f09f"),q=i("a370"),T=i("2c91"),H=i("9c40"),I=i("27f9"),P=i("4983"),D=i("7f67"),E=Object(d["a"])(S,o,a,!1,null,"79a96d63",null),O=E.exports;x()(E,"components",{QPage:k["a"],QDialog:_["a"],QCard:C["a"],QCardSection:q["a"],QSpace:T["a"],QBtn:H["a"],QInput:I["a"],QScrollArea:P["a"]}),x()(E,"directives",{ClosePopup:D["a"]});var z={components:{Editor:O},name:"SectionPage",created:function(){0===Object.entries(this.$route.query).length&&this.$route.query.constructor===Object&&this.$q.notify({message:"Your work will not be saved as you are not registered.",icon:"warning",color:"orange"})},beforeMount:function(){this.loadContents()},beforeRouteUpdate:function(t,e,i){this.loadContents(t.query),i()},data:function(){return{title:"I am a title",text:"Hello my friend. :)",type:""}},methods:{handleInput:function(t){var e=this;this.text=t,"manuscript"==this.type?this.$store.dispatch("write/editManuscript",{text:this.text}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})})):this.$store.dispatch("write/editChapter",{chapter:{text:this.text},type:this.type,id:Object.values(this.$route.query)[0]}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})}))},loadContents:function(t){var e=this;t=t||this.$route.query;var i=Object.keys(t)[0];switch(i&&("manuscript"==i?this.$api.get("manuscripts/"+Object.values(t)[0]).then((function(t){var i=t.data;e.$store.commit("write/setManuscript",i);try{e.$q.sessionStorage.set("currentManuscript",i)}catch(n){console.log("err",n)}})):this.$store.dispatch("write/getChapter",{type:i,id:t[i]}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})}))),i){case"front_matter":this.text=this.$store.getters["write/manuscriptProperty"]("front_matters").find((function(e){return e.id===t.front_matter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("front_matters").find((function(e){return e.id===t.front_matter})).title;break;case"chapter":this.text=this.$store.getters["write/manuscriptProperty"]("chapters").find((function(e){return e.id===t.chapter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("chapters").find((function(e){return e.id===t.chapter})).title;break;case"back_matter":this.text=this.$store.getters["write/manuscriptProperty"]("back_matters").find((function(e){return e.id===t.back_matter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("back_matters").find((function(e){return e.id===t.back_matter})).title;break;case"manuscript":this.text=this.$store.getters["write/manuscriptProperty"]("text"),this.title=this.$store.getters["write/manuscriptProperty"]("title");break;default:}this.type=i}}},j=z,A=Object(d["a"])(j,n,r,!1,null,null,null);e["default"]=A.exports;x()(A,"components",{QPage:k["a"]})}}]);