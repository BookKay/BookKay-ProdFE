(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0036":function(t,e,n){"use strict";n("bae5")},"7a81":function(t,e,n){},bae5:function(t,e,n){},c2e3:function(t,e,n){},dd56:function(t,e,n){},f7ec:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex flex-center",staticStyle:{overflow:"hidden"}},[n("editor",{ref:"editor",attrs:{title:t.title,text:t.text},on:{textChanged:t.handleInput}})],1)},r=[],o=(n("4fad"),n("07ac"),n("b64b"),n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-dialog",{model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center q-pb-none"},[n("div",{staticClass:"text-h6"},[t._v("Info")]),n("q-space"),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),n("q-card-section",[n("p",[t._v("\n          ***The different formatting options won't be appearing\n          accordingly(all will be the same). However, it will be rendered\n          appropriately at the reader's side when published.\n        ")]),n("p",[t._v("\n          - All progress are automatically saved and sync with our cloud\n          storage. So, it is perfectly fine to not click save button.\n        ")]),n("p",[t._v("\n          - Paragraph formattings will have an automatic first-line indent at\n          the readers. So, you are not required to indent manually.\n        ")]),n("p",[t._v("\n          - Please do try out our zen mode ðŸ˜‰\n        ")])])],1)],1),n("div",{staticClass:"row q-ma-sm"},[n("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:"Zen Mode",icon:"self_improvement"},on:{click:t.enableZen}})],1),n("div",{staticClass:"row text-h6 q-ma-lg items-center"},[n("h2",{staticClass:"q-ma-md"},[t._v(t._s(t.$props.title))])]),n("notebook-ui",{ref:"notebook",staticClass:"window-width",attrs:{customStyle:{color:"orange","text-decoration":"bold"},content:t.new_text,placeholder:"Let's write your story!!!",type:"Texture",color:"red"},on:{input:t.textChanged,save:t.textChanged}}),n("q-scroll-area",{class:{hidden:!t.isFullScreen},staticStyle:{height:"200px","max-width":"300px"},attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle,visible:!1,id:"notebook"}},[n("notebook-ui",{ref:"notebook",staticClass:"window-width",staticStyle:{"min-height":"100vh","border-radius":"0"},attrs:{customStyle:{color:"orange"},content:t.new_text,placeholder:"Let's write your story!!!",type:"Texture",color:"black"},on:{input:t.textChanged,save:t.textChanged}})],1)],1)}),a=[],s=(n("ac1f"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note-area",class:["note-area--"+t.type,"note-area-margin--"+t.type]},[n("q-editor",{ref:"editor_ref",staticClass:"note-area-content",class:["note-area-content--"+t.type],style:t.customStyle?t.customStyle:{color:t.color,"font-family":t.fontStyle},attrs:{placeholder:t.placeholder,value:t.content,minHeight:"480",flat:"","paragraph-tag":"p",spellcheck:"false",definitions:{save:{tip:"Save your work",icon:"save",label:"Save",handler:t.saveText},strike:{key:9}},toolbar:[["bold","italic","strike","underline","link"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["h1","h2","h3","h4","h5","h6","p","code"]}],[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,options:["left","center","right","justify"]}],["undo","redo"],["save"]]},on:{input:t.inputChanged,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"s",void 0,e.key,void 0)?null:e.ctrlKey?(e.preventDefault(),e.stopPropagation(),t.saveText(e)):null}},nativeOn:{paste:function(e){return function(e){return t.pasteCapture(e)}(e)}}})],1)}),c=[],l=(n("7a81"),n("dd56"),n("c2e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.val,expression:"val"}],style:t.computedStyles,domProps:{value:t.val},on:{focus:t.resize,input:function(e){e.target.composing||(t.val=e.target.value)}}})}),u=[],h=(n("a9e3"),n("caad"),n("2532"),n("99af"),{name:"TextareaAutogrow",props:{value:{type:[String,Number],default:""},autosize:{type:Boolean,default:!0},minHeight:{type:[Number],default:null},maxHeight:{type:[Number],default:null},important:{type:[Boolean,Array],default:!1}},data:function(){return{val:null,maxHeightScroll:!1,height:"auto"}},computed:{computedStyles:function(){return this.autosize?{resize:this.isResizeImportant?"none !important":"none",height:this.height,overflow:this.maxHeightScroll?"auto":this.isOverflowImportant?"hidden !important":"hidden"}:{}},isResizeImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("resize")},isOverflowImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("overflow")},isHeightImportant:function(){var t=this.important;return!0===t||Array.isArray(t)&&t.includes("height")}},watch:{value:function(t){this.val=t},val:function(t){this.$nextTick(this.resize),this.$emit("input",t)},minHeight:function(){this.$nextTick(this.resize)},maxHeight:function(){this.$nextTick(this.resize)},autosize:function(t){t&&this.resize()}},methods:{resize:function(){var t=this,e=this.isHeightImportant?"important":"";return this.height="auto".concat(e?" !important":""),this.$nextTick((function(){var n=t.$el.scrollHeight+1;t.minHeight&&(n=n<t.minHeight?t.minHeight:n),t.maxHeight&&(n>t.maxHeight?(n=t.maxHeight,t.maxHeightScroll=!0):t.maxHeightScroll=!1);var i=n+"px";t.height="".concat(i).concat(e?" !important":"")})),this}},created:function(){this.val=this.value},mounted:function(){this.resize()}}),d=h,p=n("2877"),f=Object(p["a"])(d,l,u,!1,null,null,null),m=(f.exports,{name:"notebook-ui",props:{type:{type:String,default:"EmptyLined",validator:function(t){return-1!==["EmptyLined","EmptyLinedColored","Texture"].indexOf(t)}},color:{type:String,default:"mediumblue"},fontStyle:{type:String,default:'"Handlee", cursive'},placeholder:{default:"Write note here"},content:{default:""},customStyle:{type:Object}},methods:{inputChanged:function(t){this.$emit("input",t)},saveText:function(t){this.$emit("save",this.$props.content),console.log(this.$props.content),console.log(this.$q.lang.editor),this.$q.notify({message:"Your work has been saved.",icon:"save",color:"positive"})},pasteCapture:function(t){var e,n;"INPUT"!==t.target.nodeName&&(t.preventDefault(),t.originalEvent&&t.originalEvent.clipboardData.getData?(e=t.originalEvent.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):t.clipboardData&&t.clipboardData.getData?(e=t.clipboardData.getData("text/plain"),this.$refs.editor_ref.runCmd("insertText",e)):window.clipboardData&&window.clipboardData.getData&&(n||(n=!0,this.$refs.editor_ref.runCmd("ms-pasteTextOnly",e)),n=!1))}}}),g=m,y=n("d66b"),v=n("eebe"),x=n.n(v),b=Object(p["a"])(g,s,c,!1,null,null,null),w=b.exports;x()(b,"components",{QEditor:y["a"]});var $={components:{NotebookUi:w},name:"Editor",props:{title:{type:String,required:!0},text:{type:String,required:!0}},watch:{"$q.fullscreen.isActive":function(t){this.isFullScreen=t},"$props.text":function(t){this.new_text=t}},created:function(){this.textChanged=debounce(this.textChanged,500,!0),document.addEventListener("beforeunload",this.checkTextSync)},beforeDestroy:function(){this.checkTextSync()},data:function(){return{info:!0,new_title:this.$props.title,new_text:this.$props.text,isFullScreen:!1,isEditing:!0,thumbStyle:{right:"4px",borderRadius:"5px",backgroundColor:"orange",width:"5px",opacity:.75},barStyle:{right:"2px",borderRadius:"9px",backgroundColor:"orange",width:"9px",opacity:.2}}},methods:{enableZen:function(){var t=document.getElementById("notebook");this.$q.fullscreen.toggle(t).then((function(){})).catch((function(t){alert(t)}))},textChanged:function(t){this.new_text=t,this.$emit("textChanged",t)},titleChanged:function(t){this.$refs.titleInput.validate(),this.$refs.titleInput.hasError||(t=t.replace(/(\r\n|\n|\r)/gm,""),this.new_title=t,this.$emit("titleChanged",t))},checkTextSync:function(){this.new_text!=this.$props.text&&this.$emit("textChanged",this.new_text)}}},k=$,S=(n("0036"),n("9989")),C=n("24e8"),_=n("f09f"),q=n("a370"),H=n("2c91"),T=n("9c40"),E=n("27f9"),P=n("4983"),D=n("7f67"),O=Object(p["a"])(k,o,a,!1,null,"e25fd872",null),z=O.exports;x()(O,"components",{QPage:S["a"],QDialog:C["a"],QCard:_["a"],QCardSection:q["a"],QSpace:H["a"],QBtn:T["a"],QInput:E["a"],QScrollArea:P["a"]}),x()(O,"directives",{ClosePopup:D["a"]});var I={components:{Editor:z},name:"SectionPage",created:function(){0===Object.entries(this.$route.query).length&&this.$route.query.constructor===Object&&this.$q.notify({message:"Your work will not be saved as you are not registered.",icon:"warning",color:"orange"})},beforeMount:function(){this.loadContents()},beforeRouteUpdate:function(t,e,n){this.loadContents(t.query),n()},data:function(){return{title:"I am a title",text:"Hello my friend. :)",type:""}},methods:{handleInput:function(t){var e=this;this.text=t,"manuscript"==this.type?this.$store.dispatch("write/editManuscript",{text:this.text}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})})):this.$store.dispatch("write/editChapter",{chapter:{text:this.text},type:this.type,id:Object.values(this.$route.query)[0]}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})}))},loadContents:function(t){var e=this;t=t||this.$route.query;var n=Object.keys(t)[0];switch(n&&("manuscript"==n?this.$api.get("manuscripts/"+Object.values(t)[0]).then((function(t){var n=t.data;e.$store.commit("write/setManuscript",n);try{e.$q.sessionStorage.set("currentManuscript",n)}catch(i){console.log("err",i)}})):this.$store.dispatch("write/getChapter",{type:n,id:t[n]}).then((function(t){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})}))),n){case"front_matter":this.text=this.$store.getters["write/manuscriptProperty"]("front_matters").find((function(e){return e.id===t.front_matter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("front_matters").find((function(e){return e.id===t.front_matter})).title;break;case"chapter":this.text=this.$store.getters["write/manuscriptProperty"]("chapters").find((function(e){return e.id===t.chapter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("chapters").find((function(e){return e.id===t.chapter})).title;break;case"back_matter":this.text=this.$store.getters["write/manuscriptProperty"]("back_matters").find((function(e){return e.id===t.back_matter})).text,this.title=this.$store.getters["write/manuscriptProperty"]("back_matters").find((function(e){return e.id===t.back_matter})).title;break;case"manuscript":this.text=this.$store.getters["write/manuscriptProperty"]("text"),this.title=this.$store.getters["write/manuscriptProperty"]("title");break;default:}this.type=n}}},j=I,A=Object(p["a"])(j,i,r,!1,null,null,null);e["default"]=A.exports;x()(A,"components",{QPage:S["a"]})}}]);