"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[146],{3146:(e,s,n)=>{n.r(s),n.d(s,{default:()=>S});var a=n(3673),i=n(2323),r=n(8880);(0,a.dD)("data-v-c634f5be");const o={class:"forms-container"},l={class:"signin-signup"},t=(0,a._)("h2",{class:"title"},"Sign in",-1),u=(0,a._)("h2",{class:"title"},"Sign up",-1),p={class:"panels-container"},m={class:"panel left-panel"},d={class:"content"},g=(0,a._)("h3",null,"New here ?",-1),c=(0,a._)("p",null," Register your account now to purchase your favourite books or write the next blockbuster! ",-1),h=(0,a._)("img",{src:"svg/exciting_news.svg",class:"image",alt:""},null,-1),w={class:"panel right-panel"},f={class:"content"},y=(0,a._)("h3",null,"One of us ?",-1),U=(0,a._)("p",null," Log back in to see what has changed since you last visited here; new books are waiting for you at our book store. ",-1),b=(0,a._)("img",{src:"svg/reading_book.svg",class:"image",alt:""},null,-1);function P(e,s,n,P,v,$){const _=(0,a.up)("q-icon"),I=(0,a.up)("q-input"),k=(0,a.up)("q-btn"),W=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("div",{class:(0,i.C_)(["container",v.containerClassObject])},[(0,a._)("div",o,[(0,a._)("div",l,[(0,a.Wm)(W,{class:"q-ma-lg sign-in-form"},{default:(0,a.w5)((()=>[t,(0,a.Wm)(I,{modelValue:v.signIn.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>v.signIn.user.email=e),ref:"signInEmail",type:"email",label:"Email",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your email",e=>e.length<=100||"Email must be smaller than 100",e=>-1!=e.indexOf("@")||"Please type a real email"],onKeydown:s[1]||(s[1]=(0,r.D2)((0,r.iM)((s=>e.$refs.signInPassword.focus()),["prevent"]),["enter"]))},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"mail"})])),_:1},8,["modelValue","rules"]),(0,a.Wm)(I,{ref:"signInPassword",label:"Password",class:"q-ma-md",modelValue:v.signIn.user.password,"onUpdate:modelValue":s[3]||(s[3]=e=>v.signIn.user.password=e),type:v.signIn.showPwd?"text":"password","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your password",e=>e.length<=100||"Password must not exceeds 100",e=>e.length>8||"Password must exceeds 8"],onKeydown:(0,r.D2)((0,r.iM)($.signInSubmit,["prevent"]),["enter"])},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"fas fa-lock"})])),append:(0,a.w5)((()=>[(0,a.Wm)(_,{name:v.signIn.showPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>v.signIn.showPwd=!v.signIn.showPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules","onKeydown"]),(0,a.Wm)(k,{label:"Login",type:"submit",ripple:{early:!0},class:"btn solid",onClick:$.signInSubmit},null,8,["onClick"])])),_:1}),(0,a.Wm)(W,{class:"sign-up-form"},{default:(0,a.w5)((()=>[u,(0,a.Wm)(I,{modelValue:v.signUp.user.username,"onUpdate:modelValue":s[4]||(s[4]=e=>v.signUp.user.username=e),ref:"signUpUsername",label:"Username",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your username",e=>e.length<=100||"Username must not be greater than 100"],onKeydown:s[5]||(s[5]=(0,r.D2)((0,r.iM)((s=>e.$refs.signUpEmail.focus()),["prevent"]),["enter"]))},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"fas fa-user"})])),_:1},8,["modelValue","rules"]),(0,a.Wm)(I,{modelValue:v.signUp.user.email,"onUpdate:modelValue":s[6]||(s[6]=e=>v.signUp.user.email=e),ref:"signUpEmail",type:"email",label:"Email",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your email",e=>e.length<=100||"Email must be smaller than 100",e=>-1!=e.indexOf("@")||"Please type a real email"],onKeydown:s[7]||(s[7]=(0,r.D2)((0,r.iM)((s=>e.$refs.signUpPassword.focus()),["prevent"]),["enter"]))},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"fas fa-envelope"})])),_:1},8,["modelValue","rules"]),(0,a.Wm)(I,{modelValue:v.signUp.user.password,"onUpdate:modelValue":s[9]||(s[9]=e=>v.signUp.user.password=e),ref:"signUpPassword",type:v.signUp.showPwd?"text":"password",label:"Password",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your password",e=>e.length<=100||"Password must not exceeds 100",e=>e.length>8||"Password must exceeds 8"],onKeydown:s[10]||(s[10]=(0,r.D2)((0,r.iM)((s=>e.$refs.signUpPassword2.focus()),["prevent"]),["enter"]))},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"fas fa-lock"})])),append:(0,a.w5)((()=>[(0,a.Wm)(_,{name:e.showPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[8]||(s[8]=s=>e.showPwd=!e.showPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,a.Wm)(I,{modelValue:v.signUp.password2,"onUpdate:modelValue":s[12]||(s[12]=e=>v.signUp.password2=e),ref:"signUpPassword2",type:v.signUp.showPwd?"text":"password",label:"Reenter Password",class:"q-ma-md","lazy-rules":"ondemand",rules:[e=>null!==e&&""!==e||"Please type your password",e=>e.length<=100||"Must not exceed 100",e=>e.length>8||"Password must exceeds 8",e=>e==this.signUp.user.password||"Password not same"],onKeydown:(0,r.D2)((0,r.iM)($.signUpSubmit,["prevent"]),["enter"])},{prepend:(0,a.w5)((()=>[(0,a.Wm)(_,{name:"fas fa-lock"})])),append:(0,a.w5)((()=>[(0,a.Wm)(_,{name:v.signUp.showPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[11]||(s[11]=e=>v.signUp.showPwd=!v.signUp.showPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules","onKeydown"]),(0,a.Wm)(k,{label:"Register",type:"submit",ripple:{early:!0},class:"btn solid",onClick:$.signUpSubmit},null,8,["onClick"])])),_:1})])]),(0,a._)("div",p,[(0,a._)("div",m,[(0,a._)("div",d,[g,c,(0,a.Wm)(k,{class:"btn transparent",color:"white",outline:"",label:"Sign Up",onClick:$.changeToSignUp},null,8,["onClick"])]),h]),(0,a._)("div",w,[(0,a._)("div",f,[y,U,(0,a.Wm)(k,{class:"btn transparent",color:"white",outline:"",label:"Sign In",onClick:$.changeToSignIn},null,8,["onClick"])]),b])])],2)}(0,a.Cn)();n(7280),n(5363);const v={name:"SignInSignUpPage",data(){return{containerClassObject:{"sign-up-mode":!1},signIn:{showPwd:!1,user:{email:"",password:""}},signUp:{showPwd:!1,password2:"",user:{username:"",author_name:"",email:"",password:""}}}},beforeMount(){this.$store.getters["user/isLoggedIn"]&&this.$router.push({name:"app-read"}),"home-sign-up"==this.$route.name&&this.changeToSignUp()},methods:{changeToSignUp(){this.containerClassObject["sign-up-mode"]=!0,this.$router.push({name:"home-sign-up"})},changeToSignIn(){this.containerClassObject["sign-up-mode"]=!1,this.$router.push({name:"home-sign-in"})},async signUpSubmit(){if(this.$refs.signUpUsername.validate(),this.$refs.signUpEmail.validate(),this.$refs.signUpPassword.validate(),this.$refs.signUpPassword2.validate(),this.$refs.signUpUsername.hasError||this.$refs.signUpEmail.hasError||this.$refs.signUpPassword.hasError||this.$refs.signUpPassword2.hasError)this.formHasError=!0;else{this.loading=!0,this.signUp.user.author_name=this.signUp.user.username;try{await this.$store.dispatch("user/register",this.signUp.user),this.$q.notify({icon:"done",color:"positive",message:"Welcome!!!"}),this.$router.replace({name:"app-read"})}catch(e){let s=e.response.data.email[0],n=s.charAt(0).toUpperCase()+s.slice(1);this.$q.notify({color:"negative",position:"top",message:n||"Something went wrong",icon:"error",actions:[{label:"Login Instead?",color:"white",handler:()=>{this.$router.push({name:"home-sign-in"})}}]})}}},async signInSubmit(){if(this.$refs.signInEmail.validate(),this.$refs.signInPassword.validate(),this.$refs.signInEmail.hasError||this.$refs.signInPassword.hasError)this.formHasError=!0;else try{await this.$store.dispatch("user/login",this.signIn.user),this.$q.notify({icon:"done",color:"positive",message:"Welcome Back"}),this.$route.query=={}?this.$router.replace({path:this.$route.query.redirect}):this.$router.replace({name:"app-read"})}catch(e){let s=e.response.data[0];404==e.response.status&&(s="Sorry no user with this email is found."),this.$q.notify({color:"negative",position:"top",message:s||e.response.statusText||"Something went wrong",icon:"error",actions:[{label:"Register Instead?",color:"white",handler:()=>{this.$router.push({name:"home-sign-up"})}}]})}}}};var $=n(8689),_=n(4689),I=n(4554),k=n(8240),W=n(7518),C=n.n(W);v.render=P,v.__scopeId="data-v-c634f5be";const S=v;C()(v,"components",{QForm:$.Z,QInput:_.Z,QIcon:I.Z,QBtn:k.Z})}}]);