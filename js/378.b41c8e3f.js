"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[378],{1967:(e,o,s)=>{s.r(o),s.d(o,{default:()=>u});var t=s(3673),a=s(2323);(0,t.dD)("data-v-6703f3d0");const n=(0,t._)("h2",{class:"sub-heading"},[(0,t.Uk)("Best of the "),(0,t._)("b",null,"day!")],-1),i={class:"row"},r={key:0,class:"col"},l={key:0,class:"books-list"},d={class:"sub-heading"},c={key:1};function h(e,o,s,h,k,m){const b=(0,t.up)("stand-out-card"),f=(0,t.up)("simple-book-list"),u=(0,t.up)("linking-box");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",null,[n,(0,t._)("div",i,[(0,t.Wm)(b,{book:k.bestOfTheDay,btnLabel:"Read",onBtnClicked:m.onPrimaryClicked,class:"col"},null,8,["book","onBtnClicked"]),e.$q.screen.lt.md?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",r))])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.genres,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.name},[k.books[e.name].length>0?((0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("h2",d,(0,a.zw)(e.informal_description),1),(0,t.Wm)(f,{books:k.books[e.name],primaryLabel:"Read",onPrimaryClicked:m.onPrimaryClicked,secondaryLabel:"Details",onSecondaryClicked:m.onSecondaryClicked},null,8,["books","onPrimaryClicked","onSecondaryClicked"])])):k.loading?((0,t.wg)(),(0,t.iD)("div",c)):(0,t.kq)("",!0)])))),128)),(0,t._)("div",null,[(0,t.Wm)(u,{class:"refresh-link",mainText:"Haven't found any book that catches your eye?",text:"Let's refresh then! ",img:"svg/exciting_news.svg",label:"Let's refresh!",onBtnClicked:m.refresh},null,8,["onBtnClicked"])])],64)}(0,t.Cn)();s(71);var k=s(9978),m=s(9407),b=s(4130);const f={name:"BookShopList",components:{SimpleBookList:k.Z,LinkingBox:m.Z,StandOutCard:b.Z},data(){return{bestOfTheDay:{},books:{},loading:!0,genres:[]}},async mounted(){let e=await this.$api.get("genres"),o=e.data.results;for(const s of o)this.genres.push({name:s.name,informal_description:s.informal_description}),this.books[s.name]=[];await this.fetchBooks(),await this.fetchBestOfTheDay()},methods:{async refresh(){let e=document.getElementById("shop-heading");e.scrollIntoView({behavior:"smooth"}),await this.fetchBooks()},async fetchBooks(){this.loading=!0;for(const e of this.genres)this.books[e.name]=[];for(const e of this.genres){let o=await this.$api.get("books/genres",{params:{name:e.name,fields:"id,title,author_name,front_cover"}}),s=o.data;for(const t of s)this.books[e.name].push(t)}this.loading=!1},async fetchBestOfTheDay(){let e=await this.$api.get("books/best_of_the_day",{params:{fields:"id,title,author_name,description,front_cover"}});this.bestOfTheDay=e.data[0]},onPrimaryClicked(e){this.$router.push({name:"read-book",query:{book_id:e.id}})},onSecondaryClicked(e){let o;o=this.$store.getters["user/isLoggedIn"]?"app-browse-book":"home-browse-book",this.$router.push({name:o,params:{book_id:e.id}})}}};f.render=h,f.__scopeId="data-v-6703f3d0";const u=f}}]);