(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{3797:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex"},[a("div",{staticClass:"col q-ml-md"},[a("div",{staticClass:"row"},[a("h2",[e._v("My Profile")])]),a("q-separator"),a("div",{staticClass:"row q-my-md"},[a("div",{staticClass:"text-h5 q-mr-lg q-mb-xs-sm q-mb-md-none col-xs-12 col-md-4"},[e._v("\n        Username: "+e._s(e.getUsername)+"\n      ")]),a("div",{staticClass:"q-mb-xs-sm q-mb-md-none col-xs-12 col-md-3"},[a("q-btn",{attrs:{flat:"",label:"Change Username",color:"primary"},on:{click:function(t){e.changeUsername=!0}}})],1)]),a("div",{staticClass:"row q-my-md"},[a("div",{staticClass:"text-h5 q-mr-lg q-mb-xs-sm q-mb-md-none col-xs-12 col-md-4"},[e._v("\n        Email: "+e._s(e.getEmail)+"\n      ")]),a("div",{staticClass:"q-mb-xs-sm q-mb-md-none col-xs-12 col-md-3"},[a("q-btn",{attrs:{flat:"",label:"Change Email",color:"primary"},on:{click:function(t){e.changeEmail=!0}}})],1)]),a("div",{staticClass:"row q-my-md"},[a("div",{staticClass:"text-h5 q-mr-lg q-mb-xs-sm q-mb-md-none col-xs-12 col-md-4"},[e._v("\n        Author Name: "+e._s(e.getAuthorName)+"\n      ")]),a("div",{staticClass:"q-mb-xs-sm q-mb-md-none col-xs-12 col-md-3"},[a("q-btn",{attrs:{flat:"",label:"Change Author Name",color:"primary"},on:{click:function(t){e.changeAuthorName=!0}}})],1)]),a("div",{staticClass:"q-my-xl"},[a("div",{staticClass:"q-my-md"},[a("q-btn",{staticClass:"q-mx-lg",attrs:{label:"Change Password",color:"primary",to:{name:"app-change-password"}}})],1),a("div",{staticClass:"q-my-md"},[a("q-btn",{staticClass:"q-mx-lg",attrs:{label:"Log Out",color:"warning"},on:{click:function(t){e.confirmLogOut=!0}}})],1),a("div",{staticClass:"q-my-md"},[a("q-btn",{staticClass:"q-mx-lg",attrs:{label:"Delete Account",color:"negative"},on:{click:function(t){e.confirmDelete=!0}}})],1)])],1),a("q-dialog",{ref:"usernameDialog",attrs:{persistent:""},model:{value:e.changeUsername,callback:function(t){e.changeUsername=t},expression:"changeUsername"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Username")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{ref:"usernameInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type your username"},function(e){return e.length<=100||"Username must be smaller than 100"}],autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmUsername(t)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:e.confirmUsername}})],1)],1)],1),a("q-dialog",{ref:"emailDialog",attrs:{persistent:""},model:{value:e.changeEmail,callback:function(t){e.changeEmail=t},expression:"changeEmail"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Email")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{ref:"emailInput",attrs:{type:"email",dense:"",rules:[function(e){return null!==e&&""!==e||"Please type your email"},function(e){return e.length<=100||"Email must be smaller than 100"},function(e){return-1!=e.indexOf("@")||"Please type a real email"}],autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmEmail(t)}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:e.confirmEmail}})],1)],1)],1),a("q-dialog",{ref:"authorNameDialog",attrs:{persistent:""},model:{value:e.changeAuthorName,callback:function(t){e.changeAuthorName=t},expression:"changeAuthorName"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Author Name")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{ref:"authorNameInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type your author name"},function(e){return e.length<=100||"Author name must be smaller than 100"}],autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmAuthorName(t)}},model:{value:e.authorName,callback:function(t){e.authorName=t},expression:"authorName"}})],1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),a("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:e.confirmAuthorName}})],1)],1)],1),a("q-dialog",{model:{value:e.confirmLogOut,callback:function(t){e.confirmLogOut=t},expression:"confirmLogOut"}},[a("q-card",{staticStyle:{width:"50vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Log Out")])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        Are you sure you want to log out?\n      ")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Logout",color:"warning"},on:{click:function(t){return e.logOut()}}})],1)],1)],1),a("q-dialog",{model:{value:e.confirmDelete,callback:function(t){e.confirmDelete=t},expression:"confirmDelete"}},[a("q-card",[a("q-card-section",[a("div",{staticClass:"text-h6"},[e._v("Delete Account")])]),a("q-card-section",{staticClass:"q-pt-none"},[e._v("\n        Are you sure you want to delete your account? All your data like your\n        purchased books and manuscripts will be deleted but books you\n        published will remain.\n      ")]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Delete",color:"negative"},on:{click:function(t){return e.deleteAccount()}}})],1)],1)],1)],1)},s=[],o=(a("ac1f"),a("5319"),{name:"PageProfile",data:function(){return{username:this.$store.getters["user/userProperty"]("username"),email:this.$store.getters["user/userProperty"]("email"),authorName:this.$store.getters["user/userProperty"]("author_name"),changeUsername:!1,changeEmail:!1,changeAuthorName:!1,confirmLogOut:!1,confirmDelete:!1}},computed:{getUsername:function(){return this.$store.getters["user/userProperty"]("username")},getEmail:function(){return this.$store.getters["user/userProperty"]("email")},getAuthorName:function(){return this.$store.getters["user/userProperty"]("author_name")}},methods:{confirmUsername:function(){var e=this;this.$refs.usernameInput.validate(),this.$refs.usernameInput.hasError||(this.$store.dispatch("user/edit",{username:this.username}).then((function(e){})).catch((function(t){console.log(t),e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Please relogin to edit your credentials",icon:"error"}),e.username=e.getUsername})),this.$refs.usernameDialog.hide())},confirmEmail:function(){var e=this;this.$refs.emailInput.validate(),this.$refs.emailInput.hasError||(this.$store.dispatch("user/edit",{email:this.email}).then((function(e){})).catch((function(t){console.log(t),e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Please relogin to edit your credentials",icon:"error"}),e.email=e.getEmail})),this.$refs.emailDialog.hide())},confirmAuthorName:function(){var e=this;this.$refs.authorNameInput.validate(),this.$refs.authorNameInput.hasError||(this.$store.dispatch("user/edit",{author_name:this.authorName}).then((function(e){})).catch((function(t){console.log(t),e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Please relogin to edit your credentials",icon:"error"}),e.authorName=e.getAuthorName})),this.$refs.authorNameDialog.hide())},logOut:function(){var e=this;this.$store.dispatch("user/logout").then((function(){e.$q.notify({icon:"done",color:"positive",message:"Successfully Logged Out"}),e.$router.replace({name:"home-homepage"})}))},deleteAccount:function(){var e=this;this.$store.dispatch("user/deleteUser").then((function(t){e.$q.notify({icon:"done",color:"positive",message:"Successfully Deleted Account"}),e.$router.replace({name:"home-homepage"})})).catch((function(t){console.log(t),e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Please relogin to edit your credentials",icon:"error"})}))}}}),r=o,i=a("2877"),l=a("9989"),c=a("eb85"),u=a("9c40"),m=a("24e8"),d=a("f09f"),h=a("a370"),p=a("27f9"),f=a("4b7e"),g=a("7f67"),q=a("eebe"),y=a.n(q),v=Object(i["a"])(r,n,s,!1,null,null,null);t["default"]=v.exports;y()(v,"components",{QPage:l["a"],QSeparator:c["a"],QBtn:u["a"],QDialog:m["a"],QCard:d["a"],QCardSection:h["a"],QInput:p["a"],QCardActions:f["a"]}),y()(v,"directives",{ClosePopup:g["a"]})}}]);