(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{bb11:function(e,t,n){"use strict";n("cab2")},bc49:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"flex"},[n("div",{staticClass:"col"},[n("div",{staticClass:"row q-ml-md"},[n("h2",{staticClass:"q-mb-md"},[e._v("Characters")])]),n("q-separator",{attrs:{inset:""}}),n("div",{staticClass:"q-mt-md row",class:e.alignment},e._l(this.characters,(function(t){return n("character",{key:t.id,staticClass:"col-md-3 col-xs-10",attrs:{character:t},on:{nameEditted:e.editName,personalityEditted:e.editPersonality,descriptionEditted:e.editDescription,storylineEditted:e.editStoryLine,deleted:e.deleteCharacter}})})),1),n("add-character-button",{on:{characterAdded:e.addCharacter}})],1)])},r=[],i=(n("b0c0"),n("a4d3"),n("e01a"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-card",{staticClass:"q-mb-md normal-card"},[n("q-card-section",[n("div",{staticClass:"items-center no-wrap"},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-h6 ellipsis relative-position q-mb-sm q-pl-sm",on:{click:function(t){e.edit_name=!0}}},[e._v("\n          Name:\n          "),n("span",{staticClass:"text-body1 q-pa-sm text"},[e._v(e._s(e.character.name))])]),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-h6 relative-position q-mb-sm q-pl-sm",on:{click:function(t){e.edit_personality=!0}}},[e._v("\n          Personality:\n          "),n("span",{staticClass:"text-body1 q-pa-sm text"},[e._v(e._s(e.character.personality))])]),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-h6 relative-position q-mb-sm q-pl-sm",on:{click:function(t){e.edit_description=!0}}},[e._v("\n          Description:\n          "),n("span",{staticClass:"text-body1 q-pa-sm text"},[e._v(e._s(e.character.description))])]),n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-h6 relative-position q-mb-sm q-pl-sm",on:{click:function(t){e.edit_storyline=!0}}},[e._v("\n          Storyline:\n          "),n("span",{staticClass:"text-body1 q-pa-sm text"},[e._v(e._s(e.character.storyline))])])])]),n("q-card-actions",{staticClass:"justify-end"},[n("div",{staticClass:"row"},[n("q-btn",{attrs:{icon:"delete",color:"negative",round:"",flat:""},on:{click:function(t){e.confirm_delete=!0}}})],1),n("div",{staticClass:"row"},[n("q-btn",{staticClass:"q-ml-md",attrs:{label:"Edit",color:"primary"},on:{click:function(t){e.edit_all=!0}}})],1)])],1),n("q-dialog",{ref:"nameDialog",attrs:{persistent:""},model:{value:e.edit_name,callback:function(t){e.edit_name=t},expression:"edit_name"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Name")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"nameInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the name"},function(e){return e.length<=100||"Name must be smaller than 100"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirm("name"))}},model:{value:e.new_name,callback:function(t){e.new_name=t},expression:"new_name"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_name=e.$props.character.name}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:function(t){return e.confirm("name")}}})],1)],1)],1),n("q-dialog",{ref:"personalityDialog",attrs:{persistent:""},model:{value:e.edit_personality,callback:function(t){e.edit_personality=t},expression:"edit_personality"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Personality")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"personalityInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the personality"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirm("personality"))}},model:{value:e.new_personality,callback:function(t){e.new_personality=t},expression:"new_personality"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_personality=e.$props.character.personality}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:function(t){return e.confirm("personality")}}})],1)],1)],1),n("q-dialog",{ref:"descriptionDialog",attrs:{persistent:""},model:{value:e.edit_description,callback:function(t){e.edit_description=t},expression:"edit_description"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Description")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"descriptionInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the description"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirm("description"))}},model:{value:e.new_description,callback:function(t){e.new_description=t},expression:"new_description"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_description=e.$props.character.description}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:function(t){return e.confirm("description")}}})],1)],1)],1),n("q-dialog",{ref:"storylineDialog",attrs:{persistent:""},model:{value:e.edit_storyline,callback:function(t){e.edit_storyline=t},expression:"edit_storyline"}},[n("q-card",{staticStyle:{"min-width":"350px"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Storyline")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"storylineInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the storyline"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirm("storyline"))}},model:{value:e.new_storyline,callback:function(t){e.new_storyline=t},expression:"new_storyline"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_storyline=e.$props.character.storyline}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:function(t){return e.confirm("storyline")}}})],1)],1)],1),n("q-dialog",{ref:"allDialog",attrs:{persistent:""},model:{value:e.edit_all,callback:function(t){e.edit_all=t},expression:"edit_all"}},[n("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Name")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"nameInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the name"},function(e){return e.length<=100||"Name must be smaller than 100"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.personalityInput.focus())}},model:{value:e.new_name,callback:function(t){e.new_name=t},expression:"new_name"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Personality")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"personalityInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the personality"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.descriptionInput.focus())}},model:{value:e.new_personality,callback:function(t){e.new_personality=t},expression:"new_personality"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Description")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"descriptionInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the description"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.storylineInput.focus())}},model:{value:e.new_description,callback:function(t){e.new_description=t},expression:"new_description"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Storyline")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"storylineInput",attrs:{dense:"",rules:[function(e){return null!==e&&""!==e||"Please type the storyline"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.confirm("all"))}},model:{value:e.new_storyline,callback:function(t){e.new_storyline=t},expression:"new_storyline"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_name=e.$props.character.name,e.new_personality=e.$props.character.personality,e.new_description=e.$props.character.description,e.new_storyline=e.$props.character.storyline}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:function(t){return e.confirm("all")}}})],1)],1)],1),n("q-dialog",{ref:"deleteDialog",attrs:{persistent:""},model:{value:e.confirm_delete,callback:function(t){e.confirm_delete=t},expression:"confirm_delete"}},[n("q-card",[n("q-card-section",{staticClass:"row items-center"},[n("span",{staticClass:"q-ml-sm"},[e._v("Are you sure you want delete? All related data of the character\n          will be lost")])]),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),n("q-btn",{attrs:{flat:"",icon:"delete",label:"Delete",color:"negative"},on:{click:e.confirmDelete}})],1)],1)],1)],1)}),s=[],o={name:"Character",props:{character:{type:Object,required:!0}},data:function(){return{new_name:this.$props.character.name,new_personality:this.$props.character.personality,new_description:this.$props.character.description,new_storyline:this.$props.character.storyline,edit_name:!1,edit_personality:!1,edit_description:!1,edit_storyline:!1,edit_all:!1,confirm_delete:!1}},methods:{confirm:function(e){var t=this,n={};switch(console.log(e),e){case"name":this.$refs.nameInput.validate(),this.$refs.nameInput.hasError||(this.$emit("nameEditted",this.new_name,this.character),n.name=this.new_name,this.$refs.nameDialog.hide());break;case"personality":this.$refs.personalityInput.validate(),this.$refs.personalityInput.hasError||(this.$emit("personalityEditted",this.new_personality,this.character),n.personality=this.new_personality,this.$refs.personalityDialog.hide());break;case"description":this.$refs.descriptionInput.validate(),this.$refs.descriptionInput.hasError||(this.$emit("descriptionEditted",this.new_description,this.character),n.description=this.new_description,this.$refs.descriptionDialog.hide());break;case"storyline":this.$refs.storylineInput.validate(),this.$refs.storylineInput.hasError||(this.$emit("storylineEditted",this.new_storyline,this.character),n.storyline=this.new_storyline,this.$refs.storylineDialog.hide());break;case"all":this.$refs.nameInput.validate(),this.$refs.personalityInput.validate(),this.$refs.descriptionInput.validate(),this.$refs.storylineInput.validate(),this.$refs.nameInput.hasError||this.$refs.personalityInput.hasError||this.$refs.descriptionInput.hasError||this.$refs.storylineInput.hasError||(this.$emit("nameEditted",this.new_name,this.character),this.$emit("personalityEditted",this.new_personality,this.character),this.$emit("descriptionEditted",this.new_description,this.character),this.$emit("storylineEditted",this.new_storyline,this.character),n.name=this.new_name,n.personality=this.new_personality,n.description=this.new_description,n.storyline=this.new_storyline,this.$refs.allDialog.hide());break;default:}var a={chapter:n,id:this.$props.character.id,type:"character"};this.$store.dispatch("write/editChapter",a).then((function(e){})).catch((function(e){t.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Something went wrong",icon:"error"})}))},confirmDelete:function(){this.$emit("deleted",this.character),this.$refs.deleteDialog.hide()}}},c=o,l=(n("bb11"),n("2877")),p=n("f09f"),d=n("a370"),u=n("4b7e"),h=n("9c40"),f=n("24e8"),y=n("27f9"),m=n("714f"),_=n("7f67"),v=n("eebe"),w=n.n(v),q=Object(l["a"])(c,i,s,!1,null,"d46dfb94",null),k=q.exports;w()(q,"components",{QCard:p["a"],QCardSection:d["a"],QCardActions:u["a"],QBtn:h["a"],QDialog:f["a"],QInput:y["a"]}),w()(q,"directives",{Ripple:m["a"],ClosePopup:_["a"]});var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[n("q-btn",{staticClass:"q-ma-md",attrs:{fab:"",color:"primary",size:"lg",icon:"add"},on:{click:function(t){e.add_character=!0}}})],1),n("q-dialog",{ref:"characterDialog",attrs:{persistent:""},model:{value:e.add_character,callback:function(t){e.add_character=t},expression:"add_character"}},[n("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Name")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"nameInput",attrs:{dense:"",placeholder:"Name of your character",rules:[function(e){return null!==e&&""!==e||"Please type the name"},function(e){return e.length<=100||"Name must be smaller than 100"}],autofocus:"",autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.personalityInput.focus())}},model:{value:e.character.name,callback:function(t){e.$set(e.character,"name",t)},expression:"character.name"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Personality")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"personalityInput",attrs:{dense:"",placeholder:"Traits of your character",rules:[function(e){return null!==e&&""!==e||"Please type the personality"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.descriptionInput.focus())}},model:{value:e.character.personality,callback:function(t){e.$set(e.character,"personality",t)},expression:"character.personality"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Description")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"descriptionInput",attrs:{dense:"",placeholder:"Appearance of your character",rules:[function(e){return null!==e&&""!==e||"Please type the description"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.$refs.storylineInput.focus())}},model:{value:e.character.description,callback:function(t){e.$set(e.character,"description",t)},expression:"character.description"}})],1),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("Storyline")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{ref:"storylineInput",attrs:{dense:"",placeholder:"What will happen to your character throughout the story?",rules:[function(e){return null!==e&&""!==e||"Please type the storyline"}],autogrow:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.add(t))}},model:{value:e.character.storyline,callback:function(t){e.$set(e.character,"storyline",t)},expression:"character.storyline"}})],1),n("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.new_name="",e.new_personality="",e.new_description="",e.new_storyline=""}}}),n("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:e.add}})],1)],1)],1)],1)},b=[],g={name:"AddCharacterButton",data:function(){return{character:{name:"",personality:"",description:"",storyline:"",manuscript_id:this.$store.getters["write/manuscriptProperty"]("id")},new_name:"",new_personality:"",new_description:"",new_storyline:"",add_character:!1}},methods:{add:function(){var e=this;if(this.$refs.nameInput.validate(),this.$refs.personalityInput.validate(),this.$refs.descriptionInput.validate(),this.$refs.storylineInput.validate(),!this.$refs.nameInput.hasError&&!this.$refs.personalityInput.hasError&&!this.$refs.descriptionInput.hasError&&!this.$refs.storylineInput.hasError){var t={chapter:this.character,type:"characters"};this.$store.dispatch("write/addChapter",t).then((function(e){})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})})),this.$refs.characterDialog.hide(),this.character={name:"",personality:"",description:"",storyline:"",manuscript_id:this.$store.getters["write/manuscriptProperty"]("id")}}}}},$=g,x=n("de5e"),I=Object(l["a"])($,C,b,!1,null,null,null),E=I.exports;w()(I,"components",{QPageSticky:x["a"],QBtn:h["a"],QDialog:f["a"],QCard:p["a"],QCardSection:d["a"],QInput:y["a"],QCardActions:u["a"]}),w()(I,"directives",{ClosePopup:_["a"]});var D={components:{Character:k,AddCharacterButton:E},name:"CharacterPage",data:function(){return{}},computed:{alignment:function(){return this.$q.screen.lt.md?"justify-center":"justify-start"},characters:function(){return this.$store.getters["write/manuscriptProperty"]("characters")}},methods:{editName:function(e,t){t.name=e},editPersonality:function(e,t){t.personality=e},editDescription:function(e,t){t.description=e},editStoryLine:function(e,t){t.storyline=e},deleteCharacter:function(e){var t=this,n=this.characters.indexOf(e);this.characters.splice(n,1);var a={id:e.id,type:"character"};this.$store.dispatch("write/deleteChapter",a).then((function(e){})).catch((function(a){t.$q.notify({color:"negative",position:"top",message:a.response.data.message||"Something went wrong",icon:"error"}),t.characters.splice(n,0,e)}))},addCharacter:function(e){this.characters.push(e)}}},P=D,N=n("9989"),S=n("eb85"),O=Object(l["a"])(P,a,r,!1,null,null,null);t["default"]=O.exports;w()(O,"components",{QPage:N["a"],QSeparator:S["a"]})},cab2:function(e,t,n){}}]);