"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[301],{6215:(e,o,t)=>{t.r(o),t.d(o,{default:()=>M});t(246);var s=t(3673),a=t(2323);const i=e=>((0,s.dD)("data-v-246f795e"),e=e(),(0,s.Cn)(),e),r={class:"book"},l=["src"],n={class:"book-contents"},c={class:"col"},d={class:"book-text"},u={class:"title"},p={class:"description"},m={class:"book-img"},h={class:"col"},k=["src"],b={class:"chapters-container row"},_={class:"row info-container"},y=i((()=>(0,s._)("div",{class:"col-sm-6"},null,-1))),w={class:"row stats-container"},g=i((()=>(0,s._)("div",{class:"col-sm-6"},null,-1))),f={class:"row bottom-buttons"};function v(e,o,t,i,v,$){const x=(0,s.up)("q-btn"),q=(0,s.up)("quick-link"),C=(0,s.up)("q-item-section"),W=(0,s.up)("q-item"),L=(0,s.up)("q-list"),P=(0,s.up)("linking-box"),T=(0,s.up)("q-page"),B=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(T,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("img",{src:v.book.front_cover,alt:"Front Cover",class:"bg-img"},null,8,l),(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("h1",u,(0,a.zw)(v.book.title),1),(0,s._)("p",p,(0,a.zw)(v.book.description),1)]),(0,s._)("div",m,[(0,s.Wm)(x,{color:"white","text-color":"black",filled:"",rounded:"",label:"Read",ripple:{early:!0},class:"btn",to:{name:"read-book",query:{book_id:v.book.id}}},null,8,["to"])])]),(0,s._)("div",h,[(0,s._)("img",{src:v.book.front_cover,alt:"Front Cover",class:"front-cover"},null,8,k)])])]),(0,s._)("div",null,[(0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.book.chapters,((e,o)=>((0,s.wg)(),(0,s.j4)(q,{primaryText:`Chapter - ${o+1}`,secondaryText:e.title,onBtnClicked:o=>$.onChapterClicked(e),key:e.id,class:"chapter col-6 col-md-5"},null,8,["primaryText","secondaryText","onBtnClicked"])))),128))])]),(0,s._)("div",_,[(0,s.Wm)(P,{class:"col-12 col-sm-6",mainText:"General Information",img:"svg/information_tab.svg"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{bordered:"",separator:"",dense:e.$q.screen.lt.md,class:"q-mt-md",style:{"border-radius":"30px"}},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Author: "+(0,a.zw)(v.book.author_name),1)])),_:1})])),_:1},512),[[B]]),(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Price: "+(0,a.zw)(0==v.book.price?"Free":v.book.price),1)])),_:1})])),_:1},512),[[B]]),(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Date Published: "+(0,a.zw)($.getPublishDate),1)])),_:1})])),_:1},512),[[B]])])),_:1},8,["dense"])])),_:1}),y]),(0,s._)("div",w,[g,(0,s.Wm)(P,{class:"col-12 col-sm-6",mainText:"Numerical Data",img:"svg/growing.svg"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{bordered:"",separator:"",dense:e.$q.screen.lt.md,class:"q-mt-md",style:{"border-radius":"30px"}},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("No. of Reads: "+(0,a.zw)(v.book.read_history),1)])),_:1})])),_:1},512),[[B]]),(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("No. of Purchases: "+(0,a.zw)(v.book.book_purchases),1)])),_:1})])),_:1},512),[[B]]),(0,s.wy)((0,s.Wm)(W,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("No. of Anonymous Reads: "+(0,a.zw)(v.book.anonymous_read_history),1)])),_:1})])),_:1},512),[[B]])])),_:1},8,["dense"])])),_:1})]),(0,s._)("div",f,[v.isPurchased?((0,s.wg)(),(0,s.j4)(x,{key:0,color:"negative","text-color":"white",filled:"",rounded:"",label:"Delete",ripple:{early:!0},class:"btn",onClick:$.deleteBook},null,8,["onClick"])):v.isAuthored?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(x,{key:1,color:"positive","text-color":"white",filled:"",rounded:"",label:"Purchase",ripple:{early:!0},class:"btn",onClick:$.purchaseBook},null,8,["onClick"])),(0,s.Wm)(x,{color:"white","text-color":"black",filled:"",rounded:"",label:"Copy Link",ripple:{early:!0},class:"btn",onClick:$.copyLink},null,8,["onClick"])])])),_:1})}const $={class:"main-contents col-10"},x={class:"q-ma-md main-text"},q={class:""},C={class:"primaryText ellipsis"},W={class:"secondaryText ellipsis"},L={class:"col"};function P(e,o,t,i,r,l){const n=(0,s.up)("q-btn"),c=(0,s.Q2)("ripple");return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"container relative-position",onClick:o[0]||(o[0]=o=>e.$emit("btnClicked",e.book))},[(0,s._)("div",$,[(0,s._)("div",x,[(0,s._)("div",q,[(0,s._)("p",C,(0,a.zw)(t.primaryText),1)]),(0,s._)("p",W,(0,a.zw)(t.secondaryText),1)]),(0,s._)("div",L,[(0,s.Wm)(n,{color:"black",filled:"",round:"",icon:"keyboard_arrow_right",ripple:{early:!0},class:"float-right q-mr-md"})])])],512)),[[c,void 0,void 0,{early:!0}]])}const T={components:{},props:{primaryText:{type:String,required:!0},secondaryText:{type:String,required:!0}},name:"QuickLink",data(){return{}},methods:{}};var B=t(4260),D=t(8240),Z=t(6489),Q=t(7518),z=t.n(Q);const U=(0,B.Z)(T,[["render",P],["__scopeId","data-v-39095922"]]),R=U;z()(T,"components",{QBtn:D.Z}),z()(T,"directives",{Ripple:Z.Z});var S=t(9407),A=t(1914);const N={name:"BookDetailPage",components:{QuickLink:R,LinkingBox:S.Z},data(){return{book:{title:"Best Book LOL hohoo a very lonnnnnnnnnngggg title",author_name:"Kevin",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris velit lacus, ultricies et tempus sit amet, pharetra eu dolor. Quisque in dui ligula. Nulla scelerisque ut nisl sed lacinia. Curabitur sit amet erat diam. Fusce luctus imperdiet velit ut efficitur. Suspendisse placerat efficitur finibus. Donec imperdiet molestie massa sit amet venenatis. Mauris tempor commodo finibus.",id:"1111",price:0,front_cover:"https://res.cloudinary.com/bookkay/image/upload/v1625766495/BookKay/Front%20Cover/front_cover_da876a3a-e012-11eb-a5b9-ba6b82820b1a.png",chapters:[{title:"A new life",id:"1"},{title:"A tragedy",id:"2"},{title:"Hoho",id:"3"},{title:"OMG",id:"4"},{title:"The Finale",id:"5"}]},isPurchased:!1,isAuthored:!1,domainName:"bookkay.com"}},computed:{getPublishDate(){let e=new Date(this.book.publish_date);return e.toDateString()},getShopURL(){let e=this.$route.name.startsWith("app")?"app-browse-book":"home-browse-book";const o=this.$router.resolve({name:e,params:{book_id:this.book.id}});return o.href}},async mounted(){let e=await this.$api.get("books/"+this.$route.params.book_id,{params:{expand:"~all"}}),o=e.data;e=await this.$api.get("default-book-prototypes/"+e.data.prototype_id,{params:{expand:"chapters",fields:"chapters.id,chapters.title,chapters.index"}});let t=e.data;o.chapters=t.chapters,e=await this.$api.get(`books/${this.$route.params.book_id}/read_history`),o.read_history=e.data.read_history,e=await this.$api.get(`books/${this.$route.params.book_id}/anonymous_read_history`),o.anonymous_read_history=e.data.anonymous_read_history,e=await this.$api.get(`books/${this.$route.params.book_id}/purchases_count`),o.book_purchases=e.data.book_purchases,this.book=o,this.checkOwned()},methods:{onChapterClicked(e){this.$router.push({name:"read-book",query:{book_id:this.book.id,chapter_id:e.id}})},checkOwned(){if(this.$store.getters["user/isLoggedIn"]){let e=this.$store.getters["user/userProperty"]("books_purchased"),o=this.$store.getters["user/userProperty"]("books_authored");this.isPurchased=e.some((e=>e.id===this.book.id)),this.isAuthored=o.some((e=>e.id===this.book.id))}},async deleteBook(){await this.$api.delete(`books/${this.$route.params.book_id}/purchase`);let e=await this.$api.get("users/"+this.$store.getters["user/userProperty"]("id"),{params:{expand:"~all"}});const o=e.data;this.$store.commit("user/setUser",o),this.$q.localStorage.set("user",o),this.$router.push({name:"app-read"})},purchaseBook(){this.$router.push({name:"app-purchase-book",params:{book_id:this.book.id}})},async copyLink(){const e=this.domainName+this.getShopURL;try{await(0,A.Z)(e),this.$q.notify({icon:"done",color:"positive",message:"URL copied to clipboard"})}catch(o){this.$q.notify({icon:"error",color:"negative",message:"There was an error when copying to clipboard"})}}}};var F=t(4379),I=t(7011),j=t(3414),O=t(2035);const K=(0,B.Z)(N,[["render",v],["__scopeId","data-v-246f795e"]]),M=K;z()(N,"components",{QPage:F.Z,QBtn:D.Z,QList:I.Z,QItem:j.Z,QItemSection:O.Z}),z()(N,"directives",{Ripple:Z.Z})}}]);