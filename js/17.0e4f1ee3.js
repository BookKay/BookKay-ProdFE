(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{eb35:function(s,e,o){"use strict";o.r(e);var t=function(){var s=this,e=s.$createElement,o=s._self._c||e;return o("q-page",{staticClass:"flex flex-center"},[o("q-stepper",{ref:"stepper",attrs:{color:"primary","header-nav":"",animated:""},model:{value:s.step,callback:function(e){s.step=e},expression:"step"}},[o("q-step",{attrs:{name:1,title:"Current Password",icon:"settings",error:!s.correct_password,done:s.step>1}},[s._v("\n      Please enter your current password.\n      "),o("q-input",{ref:"old_password",staticClass:"q-ma-md",attrs:{filled:"",type:s.showPwd?"text":"password",label:"Password","lazy-rules":"",rules:[function(s){return null!==s&&""!==s||"Please type your password"},function(s){return s.length<=100||"Password must not exceeds 100"},function(s){return s.length>8||"Password must exceeds 8"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.checkPassword(e)}},scopedSlots:s._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:s.showPwd?"visibility_off":"visibility"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.old_password,callback:function(e){s.old_password=e},expression:"old_password"}}),o("q-btn",{attrs:{label:"Check Password",color:"primary"},on:{click:s.checkPassword}})],1),o("q-step",{attrs:{name:2,title:"New Password",icon:"vpn_key",done:s.step>2}},[s._v("\n      Please enter your new password.\n      "),o("q-input",{ref:"password",staticClass:"q-ma-md",attrs:{filled:"",type:s.showPwd?"text":"password",label:"Password","lazy-rules":"",rules:[function(s){return null!==s&&""!==s||"Please type your password"},function(s){return s.length<=100||"Password must not exceeds 100"},function(s){return s.length>8||"Password must exceeds 8"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.$refs.password2.focus()}},scopedSlots:s._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:s.showPwd?"visibility_off":"visibility"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.password,callback:function(e){s.password=e},expression:"password"}}),o("q-input",{ref:"password2",staticClass:"q-ma-md",attrs:{filled:"",type:s.showPwd?"text":"password",label:"Reenter Password","lazy-rules":"",rules:[function(s){return null!==s&&""!==s||"Please type your password"},function(s){return s.length<=100||"Password must not exceeds 100"},function(s){return s.length>8||"Password must exceeds 8"}]},on:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.submitPassword(e)}},scopedSlots:s._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:s.showPwd?"visibility_off":"visibility"},on:{click:function(e){s.showPwd=!s.showPwd}}})]},proxy:!0}]),model:{value:s.password2,callback:function(e){s.password2=e},expression:"password2"}}),o("q-btn",{attrs:{label:"Change Password",color:"primary"},on:{click:s.submitPassword}})],1)],1)],1)},r=[],n={name:"ChangePasswordPage",mounted:function(){this.$q.notify({color:"orange",position:"top",message:"You can change your password only within 1 hour after you have logged in.",timeout:1e4,icon:"warning"})},data:function(){return{step:1,showPwd:!1,old_password:"",password:"",password2:"",correct_password:!1}},methods:{checkPassword:function(){var s=this;this.$refs.old_password.validate(),console.log(this.$store.state.user),this.$refs.old_password.hasError||this.$store.dispatch("user/login",{email:this.$store.state.user.user.email,password:this.old_password}).then((function(e){console.log(e),s.correct_password=!0,s.step=2})).catch((function(e){s.loading=!1,s.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Something went wrong",icon:"error"})}))},submitPassword:function(){var s=this;this.$refs.password.validate(),this.$refs.password2.validate(),this.correct_password?this.$refs.password.hasError||this.$refs.password2.hasError||this.$store.dispatch("user/edit",{password:this.password}).then((function(e){s.$q.notify({icon:"done",color:"positive",message:"Password Changed"}),s.$router.push({name:"app-profile"})})).catch((function(e){s.loading=!1,s.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"})})):this.step=1}}},a=n,i=o("2877"),d=o("9989"),l=o("f531"),c=o("87fe"),p=o("27f9"),u=o("0016"),w=o("9c40"),f=o("eebe"),h=o.n(f),y=Object(i["a"])(a,t,r,!1,null,null,null);e["default"]=y.exports;h()(y,"components",{QPage:d["a"],QStepper:l["a"],QStep:c["a"],QInput:p["a"],QIcon:u["a"],QBtn:w["a"]})}}]);