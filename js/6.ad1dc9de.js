(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"3bfa":function(t,e,a){},"7f42":function(t,e,a){},"9b05":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("div",{staticClass:"col"},[a("div",{staticClass:"row q-ml-md"},[a("h2",{staticClass:"q-mb-md"},[t._v("Manuscripts")])]),a("q-separator",{staticClass:"q-mb-md",attrs:{inset:""}}),a("div",{staticClass:"row",class:t.alignment},t._l(this.manuscripts,(function(e){return a("manuscript-card",{key:e.id,staticClass:"col-md-3 col-sm-6 col-xs-12",attrs:{manuscript:e},on:{deleted:t.deleteManuscript}})})),1)],1),a("add-manuscript-button",{on:{manuscriptAdded:t.addManuscript}})],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"normal-card q-mb-md"},[a("q-img",{attrs:{src:t.url,ratio:4/3}},[a("div",{staticClass:"absolute-bottom"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.manuscript.title))])])]),a("q-card-actions",{staticClass:"justify-end"},[a("div",{staticClass:"row"},[a("q-btn",{attrs:{icon:"delete",color:"negative",round:"",flat:""},on:{click:function(e){t.confirm_delete=!0}}})],1),a("div",{staticClass:"row"},[a("q-btn",{staticClass:"q-ml-md",attrs:{label:"Edit",color:"primary"},on:{click:t.navigate}})],1)])],1),a("q-dialog",{ref:"deleteDialog",attrs:{persistent:""},model:{value:t.confirm_delete,callback:function(e){t.confirm_delete=e},expression:"confirm_delete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you want delete this manuscript. All related data (all\n          the things you have written in this manuscript) will be lost.")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",icon:"delete",label:"Delete",color:"negative"},on:{click:t.confirmDelete}})],1)],1)],1)],1)},o=[],r={props:{manuscript:{type:Object,required:!0}},data:function(){return{confirm_delete:!1}},computed:{url:function(){var t=this.$props.manuscript.front_cover?this.$props.manuscript.front_cover:this.$props.manuscript.temp_cover;return t}},methods:{navigate:function(){var t=this.$props.manuscript.id;this.$router.push({name:"write-overview",params:{manuscript_id:t}})},confirmDelete:function(){this.$emit("deleted",this.$props.manuscript)}}},c=r,l=(a("c451"),a("2877")),p=a("f09f"),d=a("068f"),u=a("4b7e"),m=a("9c40"),h=a("24e8"),f=a("a370"),v=a("7f67"),b=a("eebe"),_=a.n(b),g=Object(l["a"])(c,i,o,!1,null,"31b4729a",null),y=g.exports;_()(g,"components",{QCard:p["a"],QImg:d["a"],QCardActions:u["a"],QBtn:m["a"],QDialog:h["a"],QCardSection:f["a"]}),_()(g,"directives",{ClosePopup:v["a"]});var C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[a("q-btn",{staticClass:"q-ma-md",attrs:{fab:"",color:"primary",size:"lg",icon:"add"},on:{click:function(e){t.add_manuscript=!0}}})],1),a("q-dialog",{ref:"manuscriptDialog",attrs:{persistent:""},model:{value:t.add_manuscript,callback:function(e){t.add_manuscript=e},expression:"add_manuscript"}},[a("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Title")])]),a("q-card-section",{staticClass:"q-pt-none"},[a("q-input",{ref:"titleInput",attrs:{dense:"",placeholder:"Title of your book",rules:[function(t){return null!==t&&""!==t||"Title must not be blank"},function(t){return t.length<=100||"Title must be smaller than 100"}],autofocus:"",autogrow:""},model:{value:t.manuscript.title,callback:function(e){t.$set(t.manuscript,"title",e)},expression:"manuscript.title"}})],1),a("q-card-section",{staticClass:"row"},t._l(this.bookTypes,(function(e){return a("book-type-choices",{key:e.id,staticClass:"col-md-3",attrs:{bookType:e},on:{typeConfirmed:t.confirmType}})})),1),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"},on:{click:function(e){t.manuscript.title="",t.bookType=""}}}),a("q-btn",{attrs:{flat:"",label:"Confirm"},on:{click:t.add}})],1)],1)],1)],1)},q=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"q-ma-sm relative-position type-card",class:t.$props.bookType.chosen?"bg-grey-4":"",attrs:{rounded:""},on:{click:t.confirmType}},[a("div",{staticClass:"absolute-top-right"},[a("q-btn",{attrs:{icon:"info",flat:"",rounded:"",padding:"none"},on:{click:function(e){t.show_hint=!0}}})],1),a("div",{staticClass:"absolute-center"},[t._v(t._s(t.bookType.name))])]),a("q-dialog",{model:{value:t.show_hint,callback:function(e){t.show_hint=e},expression:"show_hint"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v(t._s(t.bookType.name))]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",[t._v("\n        "+t._s(t.bookType.hint)+"\n      ")])],1)],1)],1)},w=[],$={name:"BookTypeChoices",props:{bookType:{type:Object,required:!0}},data:function(){return{show_hint:!1}},methods:{confirmType:function(){1!=this.show_hint&&this.$emit("typeConfirmed",this.$props.bookType.configs)}}},T=$,Q=(a("b74e"),a("2c91")),x=a("714f"),A=Object(l["a"])(T,k,w,!1,null,"a1b5773c",null),j=A.exports;_()(A,"components",{QCard:p["a"],QBtn:m["a"],QDialog:h["a"],QCardSection:f["a"],QSpace:Q["a"]}),_()(A,"directives",{Ripple:x["a"],ClosePopup:v["a"]});var D={components:{BookTypeChoices:j},name:"AddCharacterButton",data:function(){return{manuscript:{title:"",description:"",temp_cover:"https://res.cloudinary.com/bookkay/image/upload/v1624466524/BookKay/Temp%20Cover/Temp_Cover.png",author_id:this.$store.getters["user/userProperty"]("id"),text:""},configs:{},add_manuscript:!1,bookTypes:[{id:"1",name:"Essay",configs:{contain_character:!1,contain_chapter:!1,contain_front_matter:!1,contain_back_matter:!1,auto_add_title:!0},hint:"A simple writing with no chapters and characters",chosen:!1},{id:"2",name:"Novel(Only chapters) ",configs:{contain_character:!1,contain_chapter:!0,contain_front_matter:!1,contain_back_matter:!1,auto_add_title:!0},hint:"A large long novels with several chapters.",chosen:!1},{id:"3",name:"Novel",configs:{contain_character:!0,contain_chapter:!0,contain_front_matter:!0,contain_back_matter:!0,auto_add_title:!0},hint:"A large long novels with several front matters, chapters and back matters. Character drafting is automatically switched on.",chosen:!1}]}},methods:{add:function(){if(this.$refs.titleInput.validate(),this.configs=={}&&this.$q.notify({icon:"error",color:"negative",message:"Please select the book type"}),!this.$refs.titleInput.hasError&&this.configs!={}){var t=this.manuscript;t.configs=this.configs,this.$emit("manuscriptAdded",t),this.manuscript.title="",this.configs={};for(var e=0;e<this.bookTypes.length;e++)this.bookTypes[e].chosen=!1;this.$refs.manuscriptDialog.hide()}},confirmType:function(t){for(var e=0;e<this.bookTypes.length;e++){var a=this.bookTypes[e];a.configs==t?a.chosen=!0:a.chosen=!1}this.configs=t}}},P=D,B=a("de5e"),M=a("27f9"),S=Object(l["a"])(P,C,q,!1,null,null,null),E=S.exports;_()(S,"components",{QPageSticky:B["a"],QBtn:m["a"],QDialog:h["a"],QCard:p["a"],QCardSection:f["a"],QInput:M["a"],QCardActions:u["a"]}),_()(S,"directives",{ClosePopup:v["a"]});var O={components:{ManuscriptCard:y,AddManuscriptButton:E},name:"WritePage",data:function(){return{}},computed:{manuscripts:function(){return this.$store.getters["user/userProperty"]("manuscripts")},alignment:function(){return this.$q.screen.lt.md?"justify-center":"justify-start"}},methods:{addManuscript:function(t){var e=this;this.$store.dispatch("user/addManuscript",t).then((function(t){console.log(t)})).catch((function(t){e.$q.notify({color:"negative",position:"top",message:t.response.data.message||"Something went wrong",icon:"error"})}))},deleteManuscript:function(t){var e=this;this.$api.delete("manuscripts/"+t.id).then((function(t){var a=t.data;e.$store.commit("user/setUser",a)}))}}},N=O,I=a("9989"),J=a("eb85"),z=Object(l["a"])(N,s,n,!1,null,null,null);e["default"]=z.exports;_()(z,"components",{QPage:I["a"],QSeparator:J["a"]})},b74e:function(t,e,a){"use strict";a("3bfa")},c451:function(t,e,a){"use strict";a("7f42")}}]);