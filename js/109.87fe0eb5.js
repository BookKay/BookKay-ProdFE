"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[109],{5109:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(3673),r=t(8880);const o=(0,a._)("h2",{class:"q-ma-lg"},"Welcome Back!!!",-1);function l(e,s,t,l,i,n){const u=(0,a.up)("q-separator"),m=(0,a.up)("q-input"),p=(0,a.up)("q-icon"),d=(0,a.up)("q-spinner-hourglass"),h=(0,a.up)("q-btn"),c=(0,a.up)("q-form"),w=(0,a.up)("q-card"),f=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(f,{class:"flex flex-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[o,(0,a.Wm)(u,{inset:""}),(0,a.Wm)(c,{class:"q-ma-lg",onSubmit:(0,r.iM)(n.onSubmit,["prevent","stop"]),onReset:(0,r.iM)(n.onReset,["prevent","stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:i.user.email,"onUpdate:modelValue":s[0]||(s[0]=e=>i.user.email=e),ref:"email",filled:"",type:"email",label:"Email",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your email",e=>e.length<=100||"Email must be smaller than 100",e=>-1!=e.indexOf("@")||"Please type a real email"],onKeydown:s[1]||(s[1]=(0,r.D2)((0,r.iM)((s=>e.$refs.password.focus()),["prevent"]),["enter"]))},null,8,["modelValue","rules"]),(0,a.Wm)(m,{modelValue:i.user.password,"onUpdate:modelValue":s[3]||(s[3]=e=>i.user.password=e),filled:"",ref:"password",type:i.showPwd?"text":"password",label:"Password",class:"q-ma-md","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type your password",e=>e.length<=100||"Password must not exceeds 100",e=>e.length>8||"Password must exceeds 8"]},{append:(0,a.w5)((()=>[(0,a.Wm)(p,{name:i.showPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=e=>i.showPwd=!i.showPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,a.Wm)(h,{label:"Login",type:"submit",color:"primary",class:"q-ma-md"},{default:(0,a.w5)((()=>["loading"==n.authStatus?((0,a.wg)(),(0,a.j4)(d,{key:0,color:"white",size:"1.2em"})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["onSubmit","onReset"]),(0,a.Wm)(h,{label:"Not one of us yet? Register now!",type:"submit",color:"primary",flat:"",class:"q-mx-md q-my-lg",to:{name:"home-sign-up"}})])),_:1})])),_:1})}t(7280),t(5363);const i={name:"SignInPage",data(){return{showPwd:!1,user:{email:"",password:""}}},computed:{authStatus(){return this.$store.getters["user/authStatus"]}},beforeMount(){this.$store.getters["user/isLoggedIn"]&&this.$router.push({name:"app-read"})},methods:{onSubmit(){this.$refs.email.validate(),this.$refs.password.validate(),this.$refs.email.hasError||this.$refs.password.hasError?this.formHasError=!0:this.$store.dispatch("user/login",this.user).then((e=>{this.$q.notify({icon:"done",color:"positive",message:"Welcome Back"}),this.$route.query=={}?this.$router.replace({path:this.$route.query.redirect}):this.$router.replace({name:"app-read"})})).catch((e=>{console.log(e);let s=e.response.data[0];404==e.response.status&&(s="Sorry no user with this email is found."),this.$q.notify({color:"negative",position:"top",message:s||e.response.statusText||"Something went wrong",icon:"error",actions:[{label:"Register Instead?",color:"white",handler:()=>{this.$router.push({name:"home-sign-up"})}}]})}))},onReset(){this.email=null,this.password=null,this.$refs.email.resetValidation(),this.$refs.password.resetValidation()}}};var n=t(4379),u=t(151),m=t(5869),p=t(8689),d=t(4689),h=t(4554),c=t(8240),w=t(3282),f=t(7518),g=t.n(f);i.render=l;const y=i;g()(i,"components",{QPage:n.Z,QCard:u.Z,QSeparator:m.Z,QForm:p.Z,QInput:d.Z,QIcon:h.Z,QBtn:c.Z,QSpinnerHourglass:w.Z})}}]);