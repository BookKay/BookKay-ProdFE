"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[967],{6545:(e,o,s)=>{s.r(o),s.d(o,{default:()=>g});var t=s(3673),a=s(2323);(0,t.dD)("data-v-d22459d6");const n={key:0},i=(0,t._)("h2",{class:"sub-heading"},[(0,t.Uk)("Best of the "),(0,t._)("b",null,"day!")],-1),r={class:"row"},d={key:0,class:"col"},l={key:0,class:"books-list"},c={class:"sub-heading"},h={key:1};function k(e,o,s,k,b,m){const f=(0,t.up)("stand-out-card"),u=(0,t.up)("simple-book-list"),g=(0,t.up)("linking-box");return(0,t.wg)(),(0,t.iD)(t.HY,null,[Object.keys(b.bestOfTheDay).length>0?((0,t.wg)(),(0,t.iD)("div",n,[i,(0,t._)("div",r,[(0,t.Wm)(f,{book:b.bestOfTheDay,btnLabel:"Read",onBtnClicked:m.onPrimaryClicked,class:"col"},null,8,["book","onBtnClicked"]),e.$q.screen.lt.md?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",d))])])):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.genres,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.name},[b.books[e.name].length>0?((0,t.wg)(),(0,t.iD)("div",l,[(0,t._)("h2",c,(0,a.zw)(e.informal_description),1),(0,t.Wm)(u,{books:b.books[e.name],primaryLabel:"Read",onPrimaryClicked:m.onPrimaryClicked,secondaryLabel:"Details",onSecondaryClicked:m.onSecondaryClicked},null,8,["books","onPrimaryClicked","onSecondaryClicked"])])):b.loading?((0,t.wg)(),(0,t.iD)("div",h)):(0,t.kq)("",!0)])))),128)),(0,t._)("div",null,[(0,t.Wm)(g,{class:"refresh-link",mainText:"Haven't found any book that catches your eye?",text:"Let's refresh then! ",img:"svg/exciting_news.svg",label:"Let's refresh!",onBtnClicked:m.refresh},null,8,["onBtnClicked"])])],64)}(0,t.Cn)();s(71);var b=s(9978),m=s(9407),f=s(4130);const u={name:"BookShopList",components:{SimpleBookList:b.Z,LinkingBox:m.Z,StandOutCard:f.Z},data(){return{bestOfTheDay:{},books:{},loading:!0,genres:[]}},async mounted(){let e=await this.$api.get("genres"),o=e.data.results;for(const s of o)this.genres.push({name:s.name,informal_description:s.informal_description}),this.books[s.name]=[];await this.fetchBooks(),await this.fetchBestOfTheDay()},methods:{async refresh(){let e=document.getElementById("shop-heading");e.scrollIntoView({behavior:"smooth"}),await this.fetchBooks()},async fetchBooks(){this.loading=!0;for(const e of this.genres)this.books[e.name]=[];for(const e of this.genres){let o=await this.$api.get("books/genres",{params:{name:e.name,fields:"id,title,author_name,front_cover"}}),s=o.data;for(const t of s)this.books[e.name].push(t)}this.loading=!1},async fetchBestOfTheDay(){let e=await this.$api.get("books/best_of_the_day",{params:{fields:"id,title,author_name,description,front_cover"}});this.bestOfTheDay=e.data[0]},onPrimaryClicked(e){this.$router.push({name:"read-book",query:{book_id:e.id}})},onSecondaryClicked(e){let o;o=this.$store.getters["user/isLoggedIn"]?"app-browse-book":"home-browse-book",this.$router.push({name:o,params:{book_id:e.id}})}}};u.render=k,u.__scopeId="data-v-d22459d6";const g=u}}]);