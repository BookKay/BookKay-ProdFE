"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[991],{2095:(e,t,a)=>{a.r(t),a.d(t,{default:()=>P});var r=a(3673),o=a(2323);(0,r.dD)("data-v-5153933b");const s={class:"theme-img"},i={class:"list-container"},l=(0,r._)("div",{class:"attribution"},[(0,r.Uk)(" The above profile image is automatically generated based on your username. It is made possible thanks to the awesome works of "),(0,r._)("a",{href:"https://dribbble.com/micahlanier",target:"_blank"},"Micah Lanier "),(0,r.Uk)(" (For the artworks) as well as "),(0,r._)("a",{href:"https://avatars.dicebear.com/",target:"_blank"},"DiceBear Avatar"),(0,r.Uk)(" (For AutoGenerating these avatars). ")],-1);function n(e,t,a,n,u,h){const m=(0,r.up)("theme-image"),g=(0,r.up)("q-item-label"),c=(0,r.up)("q-item-section"),d=(0,r.up)("q-icon"),p=(0,r.up)("q-item"),b=(0,r.up)("q-separator"),y=(0,r.up)("q-list"),f=(0,r.up)("prompt-dialog"),D=(0,r.up)("confirm-dialog"),v=(0,r.up)("q-page"),k=(0,r.Q2)("ripple");return(0,r.wg)(),(0,r.j4)(v,null,{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r.Wm)(m,{images:[`https://avatars.dicebear.com/api/micah/${this.username}.svg?mouth=smile`]},null,8,["images"])]),(0,r._)("div",i,[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.fields,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r.wy)((0,r.Wm)(p,{clickable:"",style:{"border-radius":"30px"},onClick:e.clickHandler},{default:(0,r.w5)((()=>[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.label),1)])),_:2},1024),(0,r.Wm)(g,{caption:"",lines:e.lines?e.lines:"2"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)(e.value),1)])),_:2},1032,["lines"])])),_:2},1024),(0,r.Wm)(c,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{name:"keyboard_arrow_right",color:"black"})])),_:1})])),_:2},1032,["onClick"]),[[k,void 0,void 0,{early:!0}]]),(0,r.Wm)(b,{spaced:"",inset:""})])))),128))])),_:1})]),l,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.promptDialogs,((e,t)=>((0,r.wg)(),(0,r.j4)(f,{key:t,open:e.state,label:e.label,value:e.value,rules:e.rules,onConfirmed:e.confirmHandler},null,8,["open","label","value","rules","onConfirmed"])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.confirmDialogs,((e,t)=>((0,r.wg)(),(0,r.j4)(D,{key:t,open:e.state,header:e.label,text:e.text,btnLabel:e.btnLabel,btnColor:e.btnColor,onConfirmed:e.confirmHandler},null,8,["open","header","text","btnLabel","btnColor","onConfirmed"])))),128))])),_:1})}(0,r.Cn)();a(7280),a(5363);var u=a(8531),h=a(1832),m=a(89);const g={name:"PageProfile",components:{PromptDialog:h.Z,ConfirmDialog:u.Z,ThemeImage:m.Z},data(){return{username:this.$store.getters["user/userProperty"]("username"),email:this.$store.getters["user/userProperty"]("email"),authorName:this.$store.getters["user/userProperty"]("author_name"),biography:this.$store.getters["user/userProperty"]("biography"),dateJoined:this.$store.getters["user/userProperty"]("date_joined"),usernameDialog:!1,emailDialog:!1,authorNameDialog:!1,biographyDialog:!1,logOutDialog:!1,deleteDialog:!1}},computed:{getUsername(){return this.$store.getters["user/userProperty"]("username")},getEmail(){return this.$store.getters["user/userProperty"]("email")},getAuthorName(){return this.$store.getters["user/userProperty"]("author_name")},getBiography(){return this.$store.getters["user/userProperty"]("biography")},getDateJoined(){return this.$store.getters["user/userProperty"]("date_joined")},fields(){return[{label:"Username",value:this.username,clickHandler:this.changeUsername},{label:"Email",value:this.getEmail,clickHandler:this.changeEmail},{label:"Author Name",value:this.getAuthorName,clickHandler:this.changeAuthorName},{label:"Biography",value:this.getBiography,clickHandler:this.changeBiography},{label:"Date Joined",value:this.dateJoined},{label:"Change Password",clickHandler:this.changePassword},{label:"Logout",clickHandler:this.confirmLogOut},{label:"Delete Account",clickHandler:this.confirmDelete}]},promptDialogs(){return[{label:"Username",state:this.usernameDialog,value:this.username,rules:[e=>null!==e&&""!==e||"Please type your username",e=>e.length<=100||"Username must be smaller than 100"],confirmHandler:this.confirmUsername},{label:"Email",state:this.emailDialog,value:this.getEmail,rules:[e=>null!==e&&""!==e||"Please type your email",e=>e.length<=100||"Email must be smaller than 100",e=>-1!=e.indexOf("@")||"Please type a real email"],confirmHandler:this.confirmEmail},{label:"Author Name",state:this.authorNameDialog,value:this.getAuthorName,rules:[e=>null!==e&&""!==e||"Please type your author name",e=>e.length<=100||"Author name must be smaller than 100"],confirmHandler:this.confirmAuthorName},{label:"Biography",state:this.biographyDialog,value:this.getAuthorName,rules:[e=>e.length<=5e3||"Your biography must be smaller than 5000 letters"],confirmHandler:this.confirmBiography}]},confirmDialogs(){return[{label:"Log Out",state:this.logOutDialog,text:"Are you sure you want to log out?",btnLabel:"Logout",btnColor:"warning",confirmHandler:this.logOut},{label:"Delete Account",state:this.deleteDialog,text:"Are you sure you want to delete your account? All your data like your\n          purchased books and manuscripts will be deleted but books you\n          published will remain.",btnLabel:"Delete",btnColor:"negative",confirmHandler:this.deleteAccount}]}},methods:{changeUsername(){this.usernameDialog=!0},changeEmail(){this.emailDialog=!0},changeAuthorName(){this.authorNameDialog=!0},changeBiography(){this.biographyDialog=!0},changePassword(){this.$router.push({name:"app-change-password"})},confirmLogOut(){this.logOutDialog=!0},confirmDelete(){this.deleteDialog=!0},confirmUsername(e){this.usernameDialog=!1,this.username!=e&&this.$store.dispatch("user/edit",{username:this.getUsername}).then((e=>{})).catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.username=this.getUsername}))},confirmEmail(e){this.emailDialog=!1,this.email!=e&&this.$store.dispatch("user/edit",{email:this.getEmail}).then((e=>{})).catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.email=this.getEmail}))},confirmAuthorName(e){this.authorNameDialog=!1,this.authorName!=e&&this.$store.dispatch("user/edit",{author_name:this.getAuthorName}).then((e=>{})).catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.authorName=this.getAuthorName}))},confirmBiography(e){this.biographyDialog=!1,this.getBiography},logOut(e){this.logOutDialog=!1,e&&this.$store.dispatch("user/logout",{id:this.$store.getters["user/userProperty"]("id")}).then((()=>{this.$q.notify({icon:"done",color:"positive",message:"Successfully Logged Out"}),this.$router.replace({name:"home-homepage"})}))},deleteAccount(e){this.deleteDialog=!1,e&&this.$store.dispatch("user/deleteUser").then((e=>{this.$q.notify({icon:"done",color:"positive",message:"Successfully Deleted Account"}),this.$router.replace({name:"home-homepage"})})).catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"})}))}}};var c=a(4379),d=a(7011),p=a(3414),b=a(2035),y=a(2350),f=a(4554),D=a(5869),v=a(6489),k=a(7518),w=a.n(k);g.render=n,g.__scopeId="data-v-5153933b";const P=g;w()(g,"components",{QPage:c.Z,QList:d.Z,QItem:p.Z,QItemSection:b.Z,QItemLabel:y.Z,QIcon:f.Z,QSeparator:D.Z}),w()(g,"directives",{Ripple:v.Z})}}]);