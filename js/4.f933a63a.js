(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0583":function(t,e,i){},"3b17":function(t,e,i){"use strict";i("0583")},"3e95":function(t,e,i){"use strict";i("a312")},"3fa8":function(t,e,i){},5169:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-background"},[i("q-dialog",{model:{value:t.info,callback:function(e){t.info=e},expression:"info"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center q-pb-none"},[i("div",{staticClass:"text-h6"},[t._v("Info")]),i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""},on:{click:function(e){return t.$q.localStorage.set("readerInfo",!0)}}})],1),i("q-card-section",[i("p",[t._v("\n          - You can turn the pages of the book by scrolling, using\n          front/back/left/right keys, or dragging with your cursor(desktop) or\n          swipe the screen(mobile)\n        ")]),i("p",[t._v("\n          - The top menu bar can be closed by either entering zen mode or\n          clicking on the upward arrow on the right. You can then call it back\n          by clicking/tapping on the top center part of the screen.\n        ")]),i("p",[t._v("\n          - Please do try out our zen mode ðŸ˜‰\n        ")])])],1)],1),i("transition",{attrs:{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated slideOutUp"}},[t.headerShow?i("div",{staticClass:"header q-pa-sm"},[i("div",{staticClass:"inline-block"},[i("q-btn",{staticClass:"q-mr-sm",attrs:{dense:"",flat:"",round:"",icon:"menu",color:"primary"},on:{click:t.toggleDrawer}}),i("q-btn",{staticClass:"q-ma-sm",attrs:{color:"primary",label:"Zen Mode",icon:"self_improvement"},on:{click:t.toggleZen}})],1),t.$q.screen.lt.sm?t._e():i("div",{staticClass:"inline-block absolute-center"},[i("q-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[i("q-avatar",{staticClass:"q-ma-xs gt-sm"},[i("img",{attrs:{src:"icons/favicon-128x128.png"}})]),i("h6",{staticClass:"q-ma-xs text-capitalize"},[t._v("BookKay")])],1)],1),i("div",{staticClass:"inline-block absolute-right "},[i("q-btn",{staticClass:"q-ma-md",attrs:{round:"",color:"primary",icon:"expand_less"},on:{click:function(e){t.headerShow=!1}}})],1)]):t._e()]),i("div",{staticClass:"transparent-area",on:{click:function(e){t.headerShow=!0}}}),i("book",{ref:"book",on:{navAdded:t.addNav,swiped:t.handleSwipe}}),i("drawer",{ref:"drawer",attrs:{direction:"left",exist:!0}},[i("div",{staticClass:"relative"},[i("q-tree",{ref:"navTree",staticClass:"col-12 col-sm-6 text-body1",attrs:{nodes:t.navigations,"node-key":"page",selected:t.selected},on:{"update:selected":[function(e){t.selected=e},t.handleSelected]}}),i("q-btn",{staticClass:"absolute-bottom",staticStyle:{"max-width":"110px"},attrs:{color:"primary",icon:"arrow_back",label:"Back"},on:{click:function(e){t.headerShow=!1,t.$router.go(-1)}}})],1)])],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loading?i("loading-screen",{attrs:{text:"Book Loading...Please Wait"}}):t._e(),t.loading?i("page",{staticClass:"transparent",class:t.widthClass,attrs:{pageNum:1,header:"title",text:"",fontSize:t.fontSize}}):t._e(),t.loading?t._e():i("flipbook",{directives:[{name:"touch-swipe",rawName:"v-touch-swipe",value:t.handleSwipe,expression:"handleSwipe"}],ref:"flipbook",attrs:{width:t.width,height:t.height,size:"fixed",maxShadowOpacity:.5,autoSize:!0,showCover:!0,mobileScrollSupport:!0,startZIndex:0,disableFlipByClick:!t.$q.screen.lt.sm,id:"flipbook"}},[i("cover",{attrs:{url:t.frontCover}}),t._l(t.pages,(function(e){return i("page",{key:e.pageNum,attrs:{pageNum:e.pageNum,header:e.header,text:e.text,fontSize:t.fontSize}})})),i("cover",{attrs:{url:t.backCover}})],2)],1)},o=[],r=i("4082"),l=i.n(r),c=(i("b64b"),i("ac1f"),i("1276"),i("2ca0"),i("caad"),i("2532"),i("fb6a"),i("5319"),i("4e82"),i("a434"),i("99af"),i("a15b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"parentElement",staticClass:"flipbook"},[t._t("default")],2)}),d=[],h=(i("a9e3"),i("1cdd")),p={name:"Flipbook",props:{width:{type:Number,required:!0},height:{type:Number,required:!0},size:{validator:function(t){return-1!==["fixed","stretch"].indexOf(t)}},minWidth:{type:Number,required:!1},maxWidth:{type:Number,required:!1},minHeight:{type:Number,required:!1},maxHeight:{type:Number,required:!1},drawShadow:{type:Boolean,default:!0},flippingTime:{type:Number,default:1e3},usePortrait:{type:Boolean,default:!0},startZIndex:{type:Number,default:0},startPage:{type:Number,default:0},autoSize:{type:Boolean,default:!0},maxShadowOpacity:{type:Number,default:1,validator:function(t){return t>=0&&t<=1}},showCover:{type:Boolean,default:!1},mobileScrollSupport:{type:Boolean,default:!0},swipeDistance:{type:Number,default:30},clickEventForward:{type:Boolean,default:!0},useMouseEvents:{type:Boolean,default:!0},disableFlipByClick:{type:Boolean,default:!1}},mounted:function(){this.createFlipbook()},data:function(){return{pageFlip:""}},methods:{createFlipbook:function(){var t=this.$refs.parentElement,e={width:this.$props.width,height:this.$props.height,size:this.$props.size,minWidth:this.$props.minWidth,maxWidth:this.$props.maxWidth,minHeight:this.$props.minHeight,maxHeight:this.$props.maxHeight,drawShadow:this.$props.drawShadow,flippingTime:this.$props.flippingTime,usePortrait:this.$props.usePortrait,startZIndex:this.$props.startZIndex,startPage:this.$props.startPage,autoSize:this.$props.autoSize,maxShadowOpacity:this.$props.maxShadowOpacity,showCover:this.$props.showCover,mobileScrollSupport:this.$props.mobileScrollSupport,swipeDistance:this.$props.swipeDistance,clickEventForward:this.$props.clickEventForward,useMouseEvents:this.$props.useMouseEvents,disableFlipByClick:this.$props.disableFlipByClick},i=new h["PageFlip"](t,e);i.getFlipController()?i.updateFromHtml(document.querySelectorAll(".page")):i.loadFromHTML(document.querySelectorAll(".page")),this.pageFlip=i},getPageCount:function(){this.pageFlip.getPageCount()},flip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(e="")&&(e=this.getCorner()),this.pageFlip.flip(t,e)},flipNext:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||(t=this.getCorner()),console.log(this.pageFlip.getOrientation()),this.pageFlip.flipNext(t)},flipPrev:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t||(t=this.getCorner()),this.pageFlip.flipPrev(t)},destroy:function(){this.pageFlip.destroy()},getCorner:function(){var t=["top","bottom"],e=t[Math.floor(Math.random()*t.length)];return e}}},u=p,f=(i("3b17"),i("2877")),g=Object(f["a"])(u,c,d,!1,null,"3e73763a",null),m=g.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"page-content"},[i("h2",{staticClass:"page-header"},[t._v(t._s(t.$props.header))]),i("div",{staticClass:"page-text",style:t.$props.fontSize,domProps:{innerHTML:t._s(t.$props.text)}}),i("div",{staticClass:"page-footer"},[t._v(t._s(t.$props.pageNum))])])])},b=[],y={name:"Page",props:{pageNum:{type:Number,required:!0},header:{type:String,required:!0},text:{type:String,required:!0},fontSize:{type:String,required:!0}}},w=y,k=(i("8868"),Object(f["a"])(w,v,b,!1,null,"1d33d8bd",null)),x=k.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("q-img",{attrs:{transition:"fade",src:t.$props.url,"spinner-color":"white"}})],1)},C=[],S={name:"Cover",props:{url:{type:String,required:!0}}},$=S,q=i("068f"),T=i("eebe"),N=i.n(T),M=Object(f["a"])($,_,C,!1,null,null,null),E=M.exports;N()(M,"components",{QImg:q["a"]});var P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{appear:"","enter-active-class":"animated slideInDown","leave-active-class":"animated slideOutUp"}},[i("div",{staticClass:"loader-wrapper"},[i("div",{staticClass:"pencil"},[i("div",{staticClass:"pencil__ball-point"}),i("div",{staticClass:"pencil__cap"}),i("div",{staticClass:"pencil__cap-base"}),i("div",{staticClass:"pencil__middle"}),i("div",{staticClass:"pencil__eraser"})]),i("div",{staticClass:"line"}),i("h2",{staticClass:"text-primary"},[t._v(t._s(t.text))])])])},B=[],L={name:"LoadingScreen",props:{text:{type:String,required:!0}}},O=L,F=(i("3e95"),Object(f["a"])(O,P,B,!1,null,"31bd307e",null)),H=F.exports,D={name:"Book",components:{Flipbook:m,Page:x,Cover:E,LoadingScreen:H},created:function(){var t=this;document.addEventListener("keydown",(function(e){t.handleKeyPress(e.key)}),{once:!0}),document.addEventListener("wheel",(function(e){t.handleScroll(e.deltaY)}),{once:!0})},mounted:function(){var t=this,e=this;function i(t){var i=1,o="<div id='RootDivContainer'>";if(e.$emit("navAdded",{type:"book",label:t["title"],page:i-1,children:[]}),e.$q.screen.lt.sm||(a(i,t["title"],""),i++),"front_matters"in t)for(var r=t["front_matters"],l=0;l<r.length;l++){e.$emit("navAdded",{type:"front_matter",label:r[l]["title"],page:i});var c=" ";e.bookConfigs.auto_add_title&&(c="<h2>"+r[l]["title"]+"</h2>");var d=o+c+r[l]["text"]+"</div>";d=e.processClosingTag(d),d=e.addTabs(d),i=s(n(d,!1),i,r[l]["title"]);var h=document.getElementsByClassName("page-text")[0].innerHTML;""!=h&&(a(i,r[l]["title"],h),document.getElementsByClassName("page-text")[0].innerHTML="",i++)}if(""!=t.text){e.$emit("navAdded",{type:"text",label:t["title"],page:i});c=" ";e.bookConfigs.auto_add_title&&(c="<h2>"+t["title"]+"</h2>");d=o+c+t["text"]+"</div>";d=e.processClosingTag(d),d=e.addTabs(d),i=s(n(d,!1),i,t["title"]);h=document.getElementsByClassName("page-text")[0].innerHTML;""!=h&&(a(i,t["title"],h),document.getElementsByClassName("page-text")[0].innerHTML="",i++)}if("chapters"in t){var p=t["chapters"];for(l=0;l<p.length;l++){e.$emit("navAdded",{type:"chapters",label:p[l]["title"],page:i});c=" ";e.bookConfigs.auto_add_title&&(c="<h2>"+p[l]["title"]+"</h2>");d=o+c+p[l]["text"]+"</div>";d=e.processClosingTag(d),d=e.addTabs(d),i=s(n(d,!1),i,p[l]["title"]);h=document.getElementsByClassName("page-text")[0].innerHTML;""!=h&&(a(i,p[l]["title"],h),document.getElementsByClassName("page-text")[0].innerHTML="",i++)}}if("back_matters"in t){var u=t["back_matters"];for(l=0;l<u.length;l++){e.$emit("navAdded",{type:"back_matter",label:u[l]["title"],page:i});c=" ";e.bookConfigs.auto_add_title&&(c="<h2>"+u[l]["title"]+"</h2>");d=o+c+u[l]["text"]+"</div>";d=e.processClosingTag(d),d=e.addTabs(d),i=s(n(d,!1),i,u[l]["title"]);h=document.getElementsByClassName("page-text")[0].innerHTML;""!=h&&(a(i,u[l]["title"],h),document.getElementsByClassName("page-text")[0].innerHTML="",i++)}}e.$q.screen.lt.sm||(a(i,t["title"],""),i++,i%2==0&&a(i,t["title"],""))}function n(t,e){var i={};if("string"===typeof t){if(window.DOMParser)var n=new DOMParser,s=n.parseFromString(t,"text/xml");else{s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1,s.loadXML(t)}t=s.firstChild}function a(t,e){e["type"]=t.nodeName;var i=t.childNodes;if(null!=i&&i.length){e["content"]=[];for(var n=0;n<i.length;n++)3==i[n].nodeType?e["content"].push(i[n].nodeValue):(e["content"].push({}),a(i[n],e["content"][e["content"].length-1]))}if(null!=t.attributes&&t.attributes.length){e["attributes"]={};for(n=0;n<t.attributes.length;n++)e["attributes"][t.attributes[n].nodeName]=t.attributes[n].nodeValue}}return a(t,i),e?JSON.stringify(i):i}function s(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("attributes"in t&&"id"in t["attributes"]&&"RootDivContainer"==t["attributes"]["id"]);else{var h="attributes"in t?c(t["type"],t["attributes"]):c(t["type"]),p=l(t["type"]),u=r(h+p,o);""!=u&&(a(i,n,u),u=r(h+p,o),i++),o.push({openingTag:h,closingTag:p})}if(t["content"])for(var f=0;f<t["content"].length;f++){var g=t["content"][f];if("string"==typeof g){g=d(g);for(var m=g.split(" "),v=0;v<m.length;v++){var b=m[v]+" ";u=r(b,o);if(""!=u){a(i,n,u);for(var y=[],w=0;w<o.length;w++){var k=o[w],x=e.pages[e.pages.length-1].text.split(" ");u=k["openingTag"].startsWith("<p")&&"<p></p>"!=x[x.length-2]?r("<p style='text-indent: 0'>"+k["closingTag"],y):r(k["openingTag"]+k["closingTag"],y),y.push(k)}u=r(b,o),i++}}}else if(e.singleTags.includes(g.type)){b="<"+g.type+"/>",u=r(b,o);""!=u&&(a(i,n,u),u=r(b,o),i++)}else i=s(g,i,n,o),o.pop()}return i}function a(t,i,n){var s={header:i,pageNum:t,text:n};e.pages.push(s)}function o(t){var e=t.style.overflow;e&&"visible"!==e||(t.style.overflow="hidden");var i=t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight;return t.style.overflow=e,i}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=document.getElementsByClassName("page-text")[0],n=i.innerHTML,s=n;if(e.length>0){var a=n.lastIndexOf(e[e.length-1]["closingTag"]),r=n.slice(a);n=n.slice(0,a),n=n+t+" "+r,i.innerHTML=n}else i.innerHTML+=t+" ";return o(i)?(i.innerHTML="",s):""}function l(t){return"</"+t+">"}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="<"+t;for(var n in e)i=i+" "+n+"='"+e[n]+"'";return i+=">",i}function d(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}console.log(n("<p style='text-indent: 10%;' width='400'>Hello <b>B<i>oy</i></b> </p>",!0)),"manuscript_id"==Object.keys(this.$route.query)[0]&&this.$api.get("manuscripts/"+this.$route.query.manuscript_id).then((function(e){var n=e.data;t.$store.commit("write/setManuscript",n);try{t.$q.sessionStorage.set("currentManuscript",n)}catch(s){console.log("err",s)}t.loadBook(n),i(t.book),t.loading=!1})),"book_id"==Object.keys(this.$route.query)[0]&&this.$api.get("books/"+this.$route.query.book_id).then((function(e){var n=e.data;t.loadBook(n),i(t.book),t.loading=!1}))},data:function(){return{widthClass:this.$q.screen.lt.sm?"full-page":"half-page",width:this.$q.screen.lt.sm?window.innerWidth:window.innerWidth/2,height:screen.height,loading:!0,lastScrollTop:0,bookConfigs:{},fontSize:"font-size: 18px",singleTags:["br","hr"],frontCover:"cover/cover.jpg",backCover:"cover/cover-2.jpg",book:{title:"",front_matters:[],chapters:[],text:"",back_matters:[]},book2:{title:"Sherlock Holmes",front_matters:[],chapters:[],back_matters:[]},text:"",pages:[]}},methods:{loadBook:function(t){this.bookConfigs=t.configs;var e=t.temp_cover,i=t.front_cover,n=t.back_cover;if(this.frontCover=this.processCoverUrls(i,e),this.backCover=this.processCoverUrls(n,e),this.book.title=t.title,t.configs.contain_front_matter&&t.front_matters.length>0)for(var s=t.front_matters.sort(this.compareIndex),a=0;a<s.length;a++){var o=s[a];this.book.front_matters.push({title:o.title,text:o.text})}if(t.configs.contain_chapter&&t.chapters.length>0){var r=t.chapters.sort(this.compareIndex);for(a=0;a<r.length;a++){var l=r[a];this.book.chapters.push({title:l.title,text:l.text})}}else{var c=t.text;this.book.text=c}if(t.configs.contain_back_matter&&t.back_matters.length>0){var d=t.back_matters.sort(this.compareIndex);for(a=0;a<d.length;a++){var h=d[a];this.book.back_matters.push({title:h.title,text:h.text})}}},compareIndex:function(t,e){return t.index<e.index?-1:t.index>e.index?1:0},processCoverUrls:function(t,e){var i=t||e,n=i.split("/");return n.splice(6,0,"w_".concat(this.width,",h_").concat(this.height,",c_scale,b_rgb:F5F5DC,q_auto")),i=n.join("/"),i},processClosingTag:function(t){return t=t.split("<br>").join("<br/>"),t=t.split("<hr>").join("<hr/>"),t=t.split("<img>").join("<img/>"),t},addTabs:function(t){return t.replaceAll("&nbsp;",'<span class="tab"></span>')},handleKeyPress:function(t){var e=this;if(this.$refs.flipbook&&!this.loading){switch(t){case"ArrowLeft":this.$refs.flipbook.flipPrev();break;case"ArrowRight":this.$refs.flipbook.flipNext();break;case"ArrowDown":this.$refs.flipbook.flipNext();break;case"ArrowUp":this.$refs.flipbook.flipPrev();break;default:}document.addEventListener("keydown",(function(t){e.handleKeyPress(t.key)}),{once:!0})}},handleScroll:function(t){var e=this;this.$refs.flipbook&&(t<0?this.$refs.flipbook.flipPrev():t>0&&this.$refs.flipbook.flipNext(),document.addEventListener("wheel",(function(t){e.handleScroll(t.deltaY)}),{once:!0}))},handleSwipe:function(t){t.evt;var e=l()(t,["evt"]),i=e.direction;"right"==i?this.$refs.flipbook.flipPrev():"left"==i?this.$refs.flipbook.flipNext():"top"==i?this.$emit("swiped","top"):"down"==i&&this.$emit("swiped","down")}}},z=D,W=(i("d10a"),i("12c5")),I=Object(f["a"])(z,a,o,!1,null,"049e719a",null),j=I.exports;N()(I,"directives",{TouchSwipe:W["a"]});var A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.enabled?i("section",[i("aside",{ref:"element",staticClass:"sidebar",style:t.style},[t._t("default")],2),i("div",{ref:"overlay",staticClass:"overlay"})]):t._e()},Z=[],Q={name:"Drawer",props:["direction","exist"],data:function(){return{auto_speed:"0.3s",manual_speed:"0.03s",threshold:20,startTime:null,startPos:null,translate:null,active:!1,visible:!0}},computed:{element:function(){return this.$refs.element},overlay:function(){return this.$refs.overlay},enabled:function(){return 1==this.exist},style:function(){return"right"==this.direction?"transform:translate3d(100%,0,0);right:0;":"transform:translate3d(-100%,0,0);left:0;"}},mounted:function(){var t=this;document.addEventListener("touchstart",(function(e){t.handleStart(e)})),document.addEventListener("touchmove",(function(e){t.handleMove(e)})),document.addEventListener("touchend",(function(e){t.handleEnd(e)})),document.addEventListener("touchcancel",(function(e){t.handleEnd(e)})),window.addEventListener("resize",(function(e){t.setVisibality(e)}),!0),this.overlay.addEventListener("transitionend",(function(e){t.handleZindex(e)}),!1),this.overlay.addEventListener("click",(function(e){t.close()}),!1),this.setVisibality()},methods:{setVisibality:function(){0==this.element.offsetWidth?this.visible=!1:this.visible=!0},handleStart:function(t){this.startTime=(new Date).getTime(),this.startPos=t.targetTouches[0].pageX,this.element.style.transitionDuration=this.manual_speed},handleMove:function(t){var e=this.gesture(t),i=this.validate(this.direction,e);if(i){var n=this.percentage(this.direction,e);"left"==this.direction?(this.translate=t.touches[0].pageX-this.element.offsetWidth,this.translate<0?this.element.style.transform="translate3d("+this.translate+"px,0,0)":this.open()):(this.translate=-(screen.width-this.element.offsetWidth-t.touches[0].pageX),this.translate>0?this.element.style.transform="translate3d("+this.translate+"px,0,0)":this.open()),this.overlayOpacity(n/100)}},handleEnd:function(t){var e=this.speed(t),i=this.gesture(t),n=this.validate(this.direction,i);n&&(e>.6?this.active?this.close():this.open():this.element.offsetWidth/2>Math.abs(this.translate)?this.open():this.close())},handleZindex:function(){var t=window.getComputedStyle(this.overlay).getPropertyValue("opacity");t<=0&&(this.overlay.style.zIndex=-999)},validate:function(t,e){if("left"==t){if(this.active&&"swiperight"==e||!this.active&&("swipeleft"==e||this.startPos>this.threshold))return!1}else if(this.active&&"swipeleft"==e||!this.active&&("swiperight"==e||this.startPos<screen.width-this.threshold))return!1;return!(document.querySelector(".sidebar.active")&&!this.active||!this.visible)},overlayOpacity:function(t){this.overlay.style.opacity=t,t>0&&(this.overlay.style.zIndex=999)},gesture:function(t){var e=["swipeleft","swiperight"],i=t.changedTouches[0].pageX;return this.startPos-i<0?e[1]:e[0]},open:function(){this.translate=0,this.element.style.transform="translate3d("+this.translate+",0,0)",this.element.style.transitionDuration=this.auto_speed,this.overlayOpacity(1),this.lock(document.querySelector("html")),this.lock(document.querySelector("body")),this.element.classList.add("active"),this.active=!0},close:function(){"left"==this.direction?this.translate="-"+this.element.offsetWidth+"px":this.translate=this.element.offsetWidth+"px",this.element.style.transform="translate3d("+this.translate+",0,0)",this.element.style.transitionDuration=this.auto_speed,this.overlayOpacity(0),this.unlock(document.querySelector("html")),this.unlock(document.querySelector("body")),this.element.classList.remove("active"),this.active=!1},speed:function(t){var e=(new Date).getTime()-this.startTime,i=Math.abs(this.startPos),n=Math.abs(t.changedTouches[0].pageX),s=i>n?i-n:n-i;return s/e},percentage:function(t,e){var i=0,n=[];return n="left"==t?["swipeleft","swiperight"]:["swiperight","swipeleft"],this.active&&e==n[0]&&(i=100-Math.round(Math.abs(this.translate)/this.element.offsetWidth*100)),this.active||e!=n[1]||(i=Math.round(100-Math.abs(this.translate)/this.element.offsetWidth*100)),i>100&&(i=100),i<0&&(i=0),i},lock:function(t){t.style.overflow="hidden",t.style.touchAction="none"},unlock:function(t){t.style.removeProperty("overflow"),t.style.removeProperty("touch-action")}},destroyed:function(){this.unlock(document.querySelector("html")),this.unlock(document.querySelector("body"))}},X=Q,U=(i("5833"),Object(f["a"])(X,A,Z,!1,null,"e675b8bc",null)),R=U.exports,V={components:{Book:j,Drawer:R},name:"ReadBook",data:function(){return{headerShow:!0,info:!0,text:"",navigations:[],selected:"",currentSelected:"",overflow:"hidden"}},mounted:function(){this.info=!this.$q.localStorage.getItem("readerInfo")},methods:{toggleZen:function(){this.$q.fullscreen.toggle().then((function(){})).catch((function(t){alert(t)})),this.headerShow=!1},toggleDrawer:function(){this.$refs.drawer.active?this.$refs.drawer.close():this.$refs.drawer.open()},addNav:function(t){"book"==t["type"]?this.navigations.push(t):this.navigations[0]["children"].push(t)},handleSelected:function(){null==this.selected?this.selected=this.currentSelected:(this.currentSelected=this.selected,this.headerShow=!1,this.$refs.book.$refs.flipbook.flip(this.currentSelected))},handleSwipe:function(t){"top"==t?headerShow=!1:"down"==t&&(headerShow=!0)}},beforeRouteUpdate:function(t,e,i){this.navigations=[],i()},beforeRouteLeave:function(t,e,i){this.overflow="auto",i()},beforeDestroy:function(){this.$q.sessionStorage.has("currentManuscript")&&this.$q.sessionStorage.remove("currentManuscript"),this.$q.sessionStorage.has("currentBook")&&this.$q.sessionStorage.remove("currentBook")}},K=V,Y=(i("60f5"),i("24e8")),J=i("f09f"),G=i("a370"),tt=i("2c91"),et=i("9c40"),it=i("cb32"),nt=i("7f41"),st=i("7f67"),at=Object(f["a"])(K,n,s,!1,null,"7e675466",null);e["default"]=at.exports;N()(at,"components",{QDialog:Y["a"],QCard:J["a"],QCardSection:G["a"],QSpace:tt["a"],QBtn:et["a"],QAvatar:it["a"],QTree:nt["a"]}),N()(at,"directives",{ClosePopup:st["a"]})},5833:function(t,e,i){"use strict";i("619b")},"60f5":function(t,e,i){"use strict";i("3fa8")},"619b":function(t,e,i){},"6da2":function(t,e,i){},"7ebd":function(t,e,i){},8868:function(t,e,i){"use strict";i("6da2")},a312:function(t,e,i){},d10a:function(t,e,i){"use strict";i("7ebd")}}]);