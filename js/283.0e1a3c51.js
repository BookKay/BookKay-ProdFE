"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[283],{8868:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var o=a(3673),r=a(2323);const i=e=>((0,o.dD)("data-v-799fff2f"),e=e(),(0,o.Cn)(),e),s={class:"theme-img"},l={class:"list-container"},n=i((()=>(0,o._)("div",{class:"attribution"},[(0,o.Uk)(" The above profile image is automatically generated based on your username. It is made possible thanks to the awesome works of "),(0,o._)("a",{href:"https://dribbble.com/micahlanier",target:"_blank"},"Micah Lanier "),(0,o.Uk)(" (For the artworks) as well as "),(0,o._)("a",{href:"https://avatars.dicebear.com/",target:"_blank"},"DiceBear Avatar"),(0,o.Uk)(" (For AutoGenerating these avatars). ")],-1)));function h(e,t,a,i,h,u){const g=(0,o.up)("image-circle"),m=(0,o.up)("q-item-label"),c=(0,o.up)("q-item-section"),p=(0,o.up)("q-icon"),d=(0,o.up)("q-item"),b=(0,o.up)("q-separator"),y=(0,o.up)("q-list"),f=(0,o.up)("app-prompt-dialog"),D=(0,o.up)("app-confirm-dialog"),v=(0,o.up)("q-page"),k=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(v,null,{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(g,{image:`https://avatars.dicebear.com/api/micah/${this.getUsername}.svg?mouth=smile`},null,8,["image"])]),(0,o._)("div",l,[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.fields,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o.wy)(((0,o.wg)(),(0,o.j4)(d,{clickable:"",style:{"border-radius":"30px"},onClick:e.clickHandler},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.label),1)])),_:2},1024),(0,o.Wm)(m,{caption:"",lines:e.lines?e.lines:"2"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.value),1)])),_:2},1032,["lines"])])),_:2},1024),(0,o.Wm)(c,{side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{name:"keyboard_arrow_right",color:"black"})])),_:1})])),_:2},1032,["onClick"])),[[k,void 0,void 0,{early:!0}]]),(0,o.Wm)(b,{spaced:"",inset:""})])))),128))])),_:1})]),n,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.promptDialogs,((e,t)=>((0,o.wg)(),(0,o.j4)(f,{key:t,open:e.state,label:e.label,value:e.value,rules:e.rules,onConfirmed:e.confirmHandler},null,8,["open","label","value","rules","onConfirmed"])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.confirmDialogs,((e,t)=>((0,o.wg)(),(0,o.j4)(D,{key:t,open:e.state,header:e.label,text:e.text,btnLabel:e.btnLabel,btnColor:e.btnColor,onConfirmed:e.confirmHandler},null,8,["open","header","text","btnLabel","btnColor","onConfirmed"])))),128))])),_:1})}a(5363);var u=a(3963),g=a(9420),m=a(3255);const c={name:"PageProfile",components:{AppPromptDialog:g.Z,AppConfirmDialog:u.Z,ImageCircle:m.Z},data(){return{username:this.$store.getters["user/userProperty"]("username"),email:this.$store.getters["user/userProperty"]("email"),authorName:this.$store.getters["user/userProperty"]("author_name"),biography:this.$store.getters["user/userProperty"]("biography"),dateJoined:this.$store.getters["user/userProperty"]("date_joined"),usernameDialog:!1,emailDialog:!1,authorNameDialog:!1,biographyDialog:!1,logOutDialog:!1,deleteDialog:!1}},computed:{getUsername(){return this.$store.getters["user/userProperty"]("username")},getEmail(){return this.$store.getters["user/userProperty"]("email")},getAuthorName(){return this.$store.getters["user/userProperty"]("author_name")},getBiography(){return this.$store.getters["user/userProperty"]("biography")},getDateJoined(){return this.$store.getters["user/userProperty"]("date_joined")},fields(){return[{label:"Username",value:this.getUsername,clickHandler:this.changeUsername},{label:"Email",value:this.getEmail,clickHandler:this.changeEmail},{label:"Author Name",value:this.getAuthorName,clickHandler:this.changeAuthorName},{label:"Biography",value:this.getBiography,clickHandler:this.changeBiography},{label:"Date Joined",value:this.dateJoined},{label:"Change Password",clickHandler:this.changePassword},{label:"Logout",clickHandler:this.confirmLogOut},{label:"Delete Account",clickHandler:this.confirmDelete}]},promptDialogs(){return[{label:"Username",state:this.usernameDialog,value:this.getUsername,rules:[e=>null!==e&&""!==e||"Please type your username",e=>e.length<=100||"Username must be smaller than 100"],confirmHandler:this.confirmUsername},{label:"Email",state:this.emailDialog,value:this.getEmail,rules:[e=>null!==e&&""!==e||"Please type your email",e=>e.length<=100||"Email must be smaller than 100",e=>-1!=e.indexOf("@")||"Please type a real email"],confirmHandler:this.confirmEmail},{label:"Author Name",state:this.authorNameDialog,value:this.getAuthorName,rules:[e=>null!==e&&""!==e||"Please type your author name",e=>e.length<=100||"Author name must be smaller than 100"],confirmHandler:this.confirmAuthorName},{label:"Biography",state:this.biographyDialog,value:this.getBiography,rules:[e=>e.length<=5e3||"Your biography must be smaller than 5000 letters"],confirmHandler:this.confirmBiography}]},confirmDialogs(){return[{label:"Log Out",state:this.logOutDialog,text:"Are you sure you want to log out?",btnLabel:"Logout",btnColor:"warning",confirmHandler:this.logOut},{label:"Delete Account",state:this.deleteDialog,text:"Are you sure you want to delete your account? All your data like your\n          purchased books and manuscripts will be deleted but books you\n          published will remain.",btnLabel:"Delete",btnColor:"negative",confirmHandler:this.deleteAccount}]}},methods:{changeUsername(){this.usernameDialog=!0},changeEmail(){this.emailDialog=!0},changeProfileImage(){this.$router.push({name:"app-profile-image-edit"})},changeAuthorName(){this.authorNameDialog=!0},changeBiography(){this.biographyDialog=!0},changePassword(){this.$router.push({name:"app-change-password"})},confirmLogOut(){this.logOutDialog=!0},confirmDelete(){this.deleteDialog=!0},confirmUsername(e){this.usernameDialog=!1,e&&this.username!=e&&this.$store.dispatch("user/edit",{username:e}).then().catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.username=this.getUsername}))},confirmEmail(e){this.emailDialog=!1,e&&this.email!=e&&this.$store.dispatch("user/edit",{email:e}).then().catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.email=this.getEmail}))},confirmAuthorName(e){this.authorNameDialog=!1,e&&this.authorName!=e&&this.$store.dispatch("user/edit",{author_name:e}).then().catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.authorName=this.getAuthorName}))},confirmBiography(e){this.biographyDialog=!1,e&&this.getBiography!=e&&this.$store.dispatch("user/edit",{biography:e}).then().catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"}),this.biography=this.getBiography}))},logOut(e){this.logOutDialog=!1,e&&this.$store.dispatch("user/logout",{id:this.$store.getters["user/userProperty"]("id")}).then((()=>{this.$q.notify({icon:"done",color:"positive",message:"Successfully Logged Out"}),this.$router.replace({name:"home-homepage"})}))},deleteAccount(e){this.deleteDialog=!1,e&&this.$store.dispatch("user/deleteUser").then((e=>{this.$q.notify({icon:"done",color:"positive",message:"Successfully Deleted Account"}),this.$router.replace({name:"home-homepage"})})).catch((e=>{console.log(e),this.$q.notify({color:"negative",position:"top",message:e.response.data.message||"Please relogin to edit your credentials",icon:"error"})}))}}};var p=a(4260),d=a(4379),b=a(7011),y=a(3414),f=a(2035),D=a(2350),v=a(4554),k=a(5869),w=a(860),$=a(7518),P=a.n($);const A=(0,p.Z)(c,[["render",h],["__scopeId","data-v-799fff2f"]]),_=A;P()(c,"components",{QPage:d.Z,QList:b.Z,QItem:y.Z,QItemSection:f.Z,QItemLabel:D.Z,QIcon:v.Z,QSeparator:k.Z}),P()(c,"directives",{Ripple:w.Z})}}]);