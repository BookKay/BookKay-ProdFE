"use strict";(self["webpackChunkbookkay"]=self["webpackChunkbookkay"]||[]).push([[967],{6545:(e,o,s)=>{s.r(o),s.d(o,{default:()=>w});var t=s(3673),a=s(2323);const n=e=>((0,t.dD)("data-v-d22459d6"),e=e(),(0,t.Cn)(),e),i={key:0},r=n((()=>(0,t._)("h2",{class:"sub-heading"},[(0,t.Uk)("Best of the "),(0,t._)("b",null,"day!")],-1))),d={class:"row"},l={key:0,class:"col"},c={key:0,class:"books-list"},h={class:"sub-heading"},k={key:1};function b(e,o,s,n,b,m){const f=(0,t.up)("stand-out-card"),u=(0,t.up)("simple-book-list"),g=(0,t.up)("linking-box");return(0,t.wg)(),(0,t.iD)(t.HY,null,[Object.keys(b.bestOfTheDay).length>0?((0,t.wg)(),(0,t.iD)("div",i,[r,(0,t._)("div",d,[(0,t.Wm)(f,{book:b.bestOfTheDay,btnLabel:"Read",onBtnClicked:m.onPrimaryClicked,class:"col"},null,8,["book","onBtnClicked"]),e.$q.screen.lt.md?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",l))])])):(0,t.kq)("",!0),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.genres,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.name},[b.books[e.name].length>0?((0,t.wg)(),(0,t.iD)("div",c,[(0,t._)("h2",h,(0,a.zw)(e.informal_description),1),(0,t.Wm)(u,{books:b.books[e.name],primaryLabel:"Read",onPrimaryClicked:m.onPrimaryClicked,secondaryLabel:"Details",onSecondaryClicked:m.onSecondaryClicked},null,8,["books","onPrimaryClicked","onSecondaryClicked"])])):b.loading?((0,t.wg)(),(0,t.iD)("div",k)):(0,t.kq)("",!0)])))),128)),(0,t._)("div",null,[(0,t.Wm)(g,{class:"refresh-link",mainText:"Haven't found any book that catches your eye?",text:"Let's refresh then! ",img:"svg/exciting_news.svg",label:"Let's refresh!",onBtnClicked:m.refresh},null,8,["onBtnClicked"])])],64)}s(71);var m=s(9978),f=s(9407),u=s(4130);const g={name:"BookShopList",components:{SimpleBookList:m.Z,LinkingBox:f.Z,StandOutCard:u.Z},data(){return{bestOfTheDay:{},books:{},loading:!0,genres:[]}},async mounted(){let e=await this.$api.get("genres"),o=e.data.results;for(const s of o)this.genres.push({name:s.name,informal_description:s.informal_description}),this.books[s.name]=[];await this.fetchBooks(),await this.fetchBestOfTheDay()},methods:{async refresh(){let e=document.getElementById("shop-heading");e.scrollIntoView({behavior:"smooth"}),await this.fetchBooks()},async fetchBooks(){this.loading=!0;for(const e of this.genres)this.books[e.name]=[];for(const e of this.genres){let o=await this.$api.get("books/genres",{params:{name:e.name,fields:"id,title,author_name,front_cover"}}),s=o.data;for(const t of s)this.books[e.name].push(t)}this.loading=!1},async fetchBestOfTheDay(){let e=await this.$api.get("books/best_of_the_day",{params:{fields:"id,title,author_name,description,front_cover"}});this.bestOfTheDay=e.data[0]},onPrimaryClicked(e){this.$router.push({name:"read-book",query:{book_id:e.id}})},onSecondaryClicked(e){let o;o=this.$store.getters["user/isLoggedIn"]?"app-browse-book":"home-browse-book",this.$router.push({name:o,params:{book_id:e.id}})}}};var y=s(4260);const p=(0,y.Z)(g,[["render",b],["__scopeId","data-v-d22459d6"]]),w=p}}]);